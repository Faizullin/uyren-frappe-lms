import"@headlessui/vue";import{r as f,s as N,i as P,o as B,c as h,a as S,b as F,u as Y,d as z,e as d,f as l,g as s,h as r,l as t,n as c,_ as k,p as w,t as o,G as D,j as C,k as v,q as G,v as q,F as M,x as U,av as E}from"./index-BIerRe8o.js";import{_ as I}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-Cdx-1Hlv.js";import"@tiptap/extension-code-block-lowlight";import"@tiptap/extension-placeholder";import"@tiptap/extension-table";import"@tiptap/extension-table-cell";import"@tiptap/extension-table-header";import"@tiptap/extension-table-row";import"@tiptap/extension-text-align";import"@tiptap/extension-text-style";import"@tiptap/extension-typography";import"@tiptap/vue-3";import"@tiptap/extension-mention";import"@vueuse/core";import{_ as R}from"./EmptyState.vue_vue_type_script_setup_true_lang-CbCenUow.js";import"@tiptap/core";import"@tiptap/extension-code-block";import"@tiptap/extension-heading";import"@tiptap/suggestion";import"@tiptap/extension-link";const T={class:"sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"},A={class:"mx-auto w-full max-w-4xl pt-6 pb-10"},H={class:"flex flex-col md:flex-row justify-between mb-4 px-3"},J={class:"text-xl font-semibold text-ink-gray-7 mb-4 md:mb-0"},K={class:"grid grid-cols-2 gap-2"},O={key:0,class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40"},Q={key:0,class:"divide-y"},W={class:"flex items-center w-full space-x-3"},X={class:"flex flex-col md:flex-row w-full"},Z={class:"flex-1"},ee={class:"text-base font-medium text-ink-gray-8"},te={key:0,class:"mt-1.5 text-base text-ink-gray-5"},se={class:"flex items-center space-x-3 md:space-x-24 text-sm md:text-base mt-1.5"},ae={class:"text-ink-gray-5"},ie={class:"text-ink-gray-5"},oe={key:2,class:"flex justify-center mt-5"},je={__name:"CertifiedParticipants",setup(le){const u=f(""),m=f({}),_=f(""),{brand:$}=N(),g=f(0),V=P("$dayjs");B(()=>{x(),p()});const n=h({doctype:"LMS Certificate",url:"lms.lms.api.get_certified_participants",start:0,pageLength:100}),x=()=>{S("lms.lms.api.get_count_of_certified_members",{filters:m.value}).then(a=>{g.value=a})},b=h({doctype:"LMS Certificate",url:"lms.lms.api.get_certification_categories",cache:["certification_categories"],auto:!0,transform(a){return a.unshift({label:__(""),value:""}),a}}),p=()=>{j(),x(),n.update({filters:m.value}),n.reload()},j=()=>{u.value?m.value.category=u.value:delete m.value.category,_.value?m.value.member_name=["like",`%${_.value}%`]:delete m.value.member_name},L=F(()=>[{label:__("Certified Members"),route:{name:"CertifiedParticipants"}}]);return Y(()=>({title:__("Certified Members"),icon:$.favicon})),(a,i)=>{const y=z("router-link");return l(),d(M,null,[s("header",T,[r(t(I),{items:L.value},null,8,["items"]),r(y,{to:{name:"Batches",query:{certification:!0}}},{default:c(()=>[r(t(k),null,{prefix:c(()=>[r(t(D),{class:"h-4 w-4 stroke-1.5"})]),default:c(()=>[w(" "+o(a.__("Get Certified")),1)]),_:1})]),_:1})]),s("div",A,[s("div",H,[s("div",J,o(g.value)+" "+o(a.__("certified members")),1),s("div",K,[r(t(G),{modelValue:_.value,"onUpdate:modelValue":i[0]||(i[0]=e=>_.value=e),placeholder:a.__("Search by Name"),type:"text",class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40",onInput:i[1]||(i[1]=e=>p())},null,8,["modelValue","placeholder"]),t(b).data?.length?(l(),d("div",O,[r(t(q),{modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=e=>u.value=e),options:t(b).data,placeholder:a.__("Category"),onChange:i[3]||(i[3]=e=>p())},null,8,["modelValue","options","placeholder"])])):v("",!0)])]),t(n).data?.length?(l(),d("div",Q,[(l(!0),d(M,null,U(t(n).data,e=>(l(),C(y,{to:{name:"ProfileCertificates",params:{username:e.username}},class:"flex sm:rounded px-3 py-2 sm:h-15 hover:bg-surface-gray-2"},{default:c(()=>[s("div",W,[r(t(E),{image:e.user_image,class:"size-8 rounded-full object-contain",label:e.full_name,size:"2xl"},null,8,["image","label"]),s("div",X,[s("div",Z,[s("div",ee,o(e.full_name),1),e.headline?(l(),d("div",te,o(e.headline),1)):v("",!0)]),s("div",se,[s("div",ae,o(e.certificate_count)+" "+o(e.certificate_count>1?a.__("certificates"):a.__("certificate")),1),i[5]||(i[5]=s("span",{class:"text-ink-gray-4 md:hidden"},"Â·",-1)),s("div",ie,o(t(V)(e.issue_date).format("DD MMM YYYY")),1)])])])]),_:2},1032,["to"]))),256))])):(l(),C(R,{key:1,type:"Certified Members"})),!t(n).list.loading&&t(n).hasNextPage?(l(),d("div",oe,[r(t(k),{onClick:i[4]||(i[4]=e=>t(n).next())},{default:c(()=>[w(o(a.__("Load More")),1)]),_:1})])):v("",!0)])],64)}}};export{je as default};
