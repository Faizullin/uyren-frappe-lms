import{aJ as N,B as j,i as S,g as D,u as L,n as z,z as p,C as U,D as A,a as I,r as T,c as m,o as l,d as _,b as r,p as e,E as y,h as g,t as b,au as E,I as K,w as n,av as H,F as v,f as P,aw as J,aq as O,ay as G,az as Q,aA as W,M as X,e as V,aK as Y,aB as Z,H as w,aC as ee,aD as se,R as ae}from"./index-RevCnO16.js";import{_ as te}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-CeasAM64.js";import{_ as re}from"./EmptyState.vue_vue_type_script_setup_true_lang-6vpbuXAr.js";const ie={class:"sticky flex items-center justify-between top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"},oe={class:"p-6"},le={class:"flex items-center justify-between space-x-32 mb-5"},ne={class:"text-xl font-semibold text-ink-gray-7"},ue={key:0,class:"grid grid-cols-3 gap-5 flex-1"},me={key:0},ce={key:0},de={key:1},_e={class:"flex gap-2"},fe={key:2,class:"flex justify-center my-5"},ve=N({__name:"ProgrammingExerciseSubmissions",setup(ye){const{brand:C}=j(),F=S("$dayjs"),f=S("$user"),h=["exercise","member","status"],o=D({exercise:"",member:"",status:""}),c=L();z(()=>{M(),R()});const M=()=>{h.forEach(s=>{c.currentRoute.value.query[s]&&(o.value[s]=c.currentRoute.value.query[s])})},R=()=>{k.value?o.value.member=f.data?.name:i.reload()},i=U({doctype:"LMS Programming Exercise Submission",fields:["name","exercise","exercise_title","member_name","member_image","status","modified"],orderBy:"modified desc",transform(s){return s.map(a=>({...a,modified:F(a.modified).fromNow()}))}});A(o.value,()=>{let s={};h.forEach(a=>{if(o.value[a])s[a]=o.value[a],c.push({query:{...c.currentRoute.value.query,[a]:o.value[a]}});else{delete s[a];const d={...c.currentRoute.value.query};delete d[a],c.push({query:d})}}),i.update({filters:{...s}}),i.reload()});const B=(s,a)=>{Array.from(s).forEach(async d=>{await i.delete.submit(d)}),a(),ae.success(__("Submissions deleted successfully"))},k=p(()=>!f.data?.is_instructor&&!f.data?.is_moderator&&!f.data?.is_evaluator),x=p(()=>[{label:__("Member"),key:"member_name",width:"20%",icon:"user"},{label:__("Exercise"),key:"exercise_title",width:"30%",icon:"code"},{label:__("Status"),key:"status",width:"20%",icon:"check-circle"},{label:__("Modified"),key:"modified",width:"20%",icon:"clock",align:"right"}]),q=p(()=>[{label:__("Programming Exercise Submissions"),route:{name:"ProgrammingExerciseSubmissions"}}]);return I(()=>({title:__("Programming Exercises"),icon:C.favicon})),(s,a)=>{const d=T("router-link");return l(),m(v,null,[_("header",ie,[r(e(te),{items:q.value},null,8,["items"])]),_("div",oe,[_("div",le,[_("div",ne,b(e(i).data?.length?s.__("{0} Submissions").format(e(i).data.length):s.__("No Submissions")),1),e(i).data?.length?(l(),m("div",ue,[r(E,{doctype:"LMS Programming Exercise",modelValue:o.value.exercise,"onUpdate:modelValue":a[0]||(a[0]=t=>o.value.exercise=t),placeholder:s.__("Filter by Exercise")},null,8,["modelValue","placeholder"]),r(E,{doctype:"User",modelValue:o.value.member,"onUpdate:modelValue":a[1]||(a[1]=t=>o.value.member=t),placeholder:s.__("Filter by Member"),readonly:k.value},null,8,["modelValue","placeholder","readonly"]),r(e(K),{modelValue:o.value.status,"onUpdate:modelValue":a[2]||(a[2]=t=>o.value.status=t),type:"select",options:[{label:s.__(""),value:""},{label:s.__("Passed"),value:"Passed"},{label:s.__("Failed"),value:"Failed"}],placeholder:s.__("Filter by Status")},null,8,["modelValue","options","placeholder"])])):g("",!0)]),e(i).loading||e(i).data?.length?(l(),y(e(se),{key:0,columns:x.value,rows:e(i).data,rowKey:"name",options:{selectable:!0}},{default:n(()=>[r(e(H),{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2"},{default:n(()=>[(l(!0),m(v,null,P(x.value,t=>(l(),y(e(J),{item:t,key:t.key},{prefix:n(({item:u})=>[r(e(O),{name:u.icon?.toString(),class:"h-4 w-4"},null,8,["name"])]),_:2},1032,["item"]))),128))]),_:1}),r(e(G),null,{default:n(()=>[(l(!0),m(v,null,P(e(i).data,t=>(l(),y(d,{to:{name:"ProgrammingExerciseSubmission",params:{exerciseID:t.exercise,submissionID:t.name}}},{default:n(()=>[r(e(Q),{row:t},{default:n(({column:u,item:$})=>[r(e(W),{item:t[u.key],align:u.align},{prefix:n(()=>[u.key=="member_name"?(l(),m("div",me,[r(e(Y),{class:"flex items-center",image:t.member_image,label:$,size:"sm"},null,8,["image","label"])])):g("",!0)]),default:n(()=>[u.key=="status"?(l(),m("div",ce,[r(e(X),{theme:t[u.key]==="Passed"?"green":"red"},{default:n(()=>[V(b(t[u.key]),1)]),_:2},1032,["theme"])])):(l(),m("div",de,b(t[u.key]),1))]),_:2},1032,["item","align"])]),_:2},1032,["row"])]),_:2},1032,["to"]))),256))]),_:1}),r(e(Z),null,{actions:n(({unselectAll:t,selections:u})=>[_("div",_e,[r(e(w),{variant:"ghost",onClick:$=>B(u,t)},{default:n(()=>[r(e(ee),{class:"h-4 w-4 stroke-1.5"})]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["columns","rows"])):(l(),y(re,{key:1,type:"Programming Exercise Submissions"})),e(i).data&&e(i).hasNextPage?(l(),m("div",fe,[r(e(w),{onClick:a[3]||(a[3]=t=>e(i).next())},{default:n(()=>[V(b(s.__("Load More")),1)]),_:1})])):g("",!0)])],64)}}});export{ve as default};
//# sourceMappingURL=ProgrammingExerciseSubmissions-BCEK6T9B.js.map
