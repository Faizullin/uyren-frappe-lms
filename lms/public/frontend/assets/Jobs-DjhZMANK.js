import{i as F,c as y,o as t,d as a,h,t as o,b as n,s as e,bR as S,bP as B,w as u,e as w,J as V,g as _,x as O,y as U,I as z,A as J,q as M,a as D,r as R,B as v,D as q,P as E,n as I,bS as L,E as C,ak as A,F as Q,f as G}from"./index-CgbsATbs.js";import{_ as H}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-KbxUUXyD.js";import{_ as K}from"./EmptyState.vue_vue_type_script_setup_true_lang-DGwjDck2.js";const W={class:"flex flex-col border rounded-md p-3 h-full hover:border-outline-gray-3"},X={class:"flex space-x-4 mb-4"},Y={class:"flex flex-col space-y-2 flex-1"},Z={class:"text-lg font-semibold text-ink-gray-9"},ee={class:"font-medium text-ink-gray-7 leading-5"},ae={class:"flex items-center space-x-1 text-sm text-ink-gray-7"},le={key:0,class:"flex items-center space-x-1 text-sm text-ink-gray-7"},se={class:"space-x-2 mt-auto"},te={__name:"JobCard",props:{job:{type:Object,default:null}},setup(l){const b=F("$dayjs");return(r,j)=>(t(),y("div",W,[a("div",X,[a("div",Y,[a("div",Z,o(l.job.company_name),1),a("span",ee,o(l.job.job_title),1),a("div",ae,[n(e(S),{class:"size-3"}),a("span",null,o(l.job.location)+o(l.job.country?`, ${l.job.country}`:""),1)]),l.job.applicants?(t(),y("div",le,[n(e(B),{class:"size-3"}),a("span",null,o(l.job.applicants)+" "+o(l.job.applicants>1?r.__("applicants"):r.__("applicant")),1)])):h("",!0)])]),a("div",se,[n(e(V),null,{default:u(()=>[w(o(l.job.type),1)]),_:1}),n(e(V),null,{default:u(()=>[w(o(e(b)(l.job.creation).fromNow()),1)]),_:1})])]))}},oe={class:""},ne={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},ie={class:"flex flex-col lg:flex-row space-y-4 lg:space-y-0 lg:items-center justify-between w-full md:w-4/5 mx-auto p-5"},re={class:"text-xl font-semibold text-ink-gray-7 mb-4 md:mb-0"},ce={key:0,class:"w-full md:w-4/5 mx-auto p-5 pt-0"},ue={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},_e={__name:"Jobs",setup(l){const b=F("$user"),r=_(null),{brand:j}=O(),d=_(""),f=_(null),c=_({}),x=_({}),k=_(0),P=window.read_only_mode;U(()=>{let s=new URLSearchParams(location.search);s.has("type")&&(r.value=s.get("type")),g()});const m=z({url:"lms.lms.api.get_job_opportunities",cache:["jobs"]}),g=()=>{T(),m.update({params:{filters:c.value,orFilters:x.value}}),m.reload()},T=()=>{c.value.status="Open",c.value.disabled=0,r.value?c.value.type=r.value:delete c.value.type,d.value?x.value={job_title:["like",`%${d.value}%`],company_name:["like",`%${d.value}%`],location:["like",`%${d.value}%`]}:x.value={},f.value?c.value.country=f.value:delete c.value.country};J(f,s=>{g()}),J(m,()=>{k.value=m.data?.length||0});const N=M(()=>["",{label:__("Full Time"),value:"Full Time"},{label:__("Part Time"),value:"Part Time"},{label:__("Contract"),value:"Contract"},{label:__("Freelance"),value:"Freelance"}]);return D(()=>({title:__("Jobs"),icon:j.favicon})),(s,p)=>{const $=R("router-link");return t(),y("div",oe,[a("header",ne,[n(e(H),{class:"h-7",items:[{label:s.__("Jobs"),route:{name:"Jobs"}}]},null,8,["items"]),e(b).data?.name?(t(),v($,{key:0,to:{name:"JobForm",params:{jobName:"new"}}},{default:u(()=>[e(P)?h("",!0):(t(),v(e(q),{key:0,variant:"solid"},{prefix:u(()=>[n(e(E),{class:"h-4 w-4"})]),default:u(()=>[w(" "+o(s.__("New Job")),1)]),_:1}))]),_:1})):h("",!0)]),a("div",null,[a("div",ie,[a("div",re,o(s.__("{0} Open Jobs").format(k.value)),1),a("div",{class:I(["grid grid-cols-1 gap-2",e(b).data?"md:grid-cols-3":"md:grid-cols-2"])},[n(e(C),{type:"text",placeholder:s.__("Search"),modelValue:d.value,"onUpdate:modelValue":p[0]||(p[0]=i=>d.value=i),class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40",onInput:g},{prefix:u(()=>[n(e(L),{class:"w-4 h-4 stroke-1.5 text-ink-gray-5",name:"search"})]),_:1},8,["placeholder","modelValue"]),e(b).data?(t(),v(A,{key:0,doctype:"Country",modelValue:f.value,"onUpdate:modelValue":p[1]||(p[1]=i=>f.value=i),placeholder:s.__("Country"),class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40"},null,8,["modelValue","placeholder"])):h("",!0),n(e(C),{modelValue:r.value,"onUpdate:modelValue":p[2]||(p[2]=i=>r.value=i),type:"select",options:N.value,class:"min-w-40 lg:min-w-0 lg:w-32 xl:w-40",placeholder:s.__("Type"),onChange:g},null,8,["modelValue","options","placeholder"])],2)]),e(m).data?.length?(t(),y("div",ce,[a("div",ue,[(t(!0),y(Q,null,G(e(m).data,i=>(t(),v($,{to:{name:"JobDetail",params:{job:i.name}},key:i.name},{default:u(()=>[n(te,{job:i},null,8,["job"])]),_:2},1032,["to"]))),128))])])):(t(),v(K,{key:1,type:"Job Openings"}))])])}}};export{_e as default};
//# sourceMappingURL=Jobs-DjhZMANK.js.map
