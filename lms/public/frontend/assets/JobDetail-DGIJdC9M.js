import{J as L,r as J,K as z,i as V,A as C,j as g,f as p,n as s,g as a,e as f,t as n,h as l,l as e,bo as P,_ as k,p as m,bp as U,bq as F,M as N,H as A,s as R,u as q,d as B,k as $,bQ as D,bR as H,bS as E,bC as O,B as S,bT as W,bU as Y,bV as K,N as Q}from"./index-DiXMRYjh.js";import{_ as G}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-cdEqS9iC.js";const I={class:"flex flex-col gap-4"},X={key:0},Z={class:""},ee={key:1,class:"flex items-center"},te={class:"border rounded-md p-2 mr-2"},ae={class:"flex flex-col"},se={class:"text-sm text-ink-gray-4 mt-1"},oe={__name:"JobApplicationModal",props:L({job:{type:String,required:!0}},{modelValue:{},modelModifiers:{},application:{},applicationModifiers:{}}),emits:["update:modelValue","update:application"],setup(y){const d=J(null),h=z(y,"modelValue"),M=V("$user"),v=z(y,"application"),x=y,w=r=>{if(r.name.split(".").pop().toLowerCase()!="pdf")return"Only PDF file is allowed"},t=C({url:"frappe.client.insert",makeParams(r){return{doc:{doctype:"LMS Job Application",user:M.data?.name,resume:d.value?.file_name,job:x.job}}}}),b=r=>{t.submit({},{validate(){if(!d.value)return"Please upload your resume"},onSuccess(){A.success("Your application has been submitted successfully"),v.value.reload(),r()},onError(c){A.error(c.messages?.[0]||c)}})};return(r,c)=>(p(),g(e(N),{modelValue:h.value,"onUpdate:modelValue":c[1]||(c[1]=u=>h.value=u),class:"text-base",options:{title:r.__("Apply for this job"),size:"lg",actions:[{label:"Submit",variant:"solid",onClick:u=>{b(u)}}]}},{"body-content":s(()=>[a("div",I,[a("p",null,n(r.__("Submit your resume to proceed with your application for this position. Upon submission, it will be shared with the job poster.")),1),d.value?(p(),f("div",ee,[a("div",te,[l(e(U),{class:"h-5 w-5 stroke-1.5 text-ink-gray-7"})]),a("div",ae,[a("span",null,n(d.value.file_name),1),a("span",se,n(e(F)(d.value.file_size)),1)])])):(p(),f("div",X,[l(e(P),{fileTypes:[".pdf"],validateFile:w,onSuccess:c[0]||(c[0]=u=>{d.value=u})},{default:s(({file:u,progress:j,uploading:o,openFileSelector:i})=>[a("div",Z,[l(e(k),{onClick:i,loading:o},{default:s(()=>[m(n(o?`Uploading ${j}%`:"Upload your resume"),1)]),_:2},1032,["onClick","loading"])])]),_:1})]))])]),_:1},8,["modelValue","options"]))}},ie={class:""},le={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},ne={key:0,class:"flex items-center space-x-2"},re={key:1},de={key:0,class:"max-w-3xl mx-auto pt-5"},pe={class:"p-4"},ce={class:"space-y-5 mb-12"},ue={class:"flex"},me=["src","alt"],be={class:""},_e={class:"text-2xl text-ink-gray-9 font-semibold mb-1"},fe={class:"text-sm text-ink-gray-5 font-semibold"},ye={class:"space-x-5"},ve={class:"flex items-center justify-between"},ge=["innerHTML"],xe={__name:"JobDetail",props:{job:{type:String,required:!0}},setup(y){const d=V("$user"),h=V("$dayjs"),{brand:M}=R(),v=J(!1),x=window.read_only_mode,w=y,t=C({url:"lms.lms.api.get_job_details",params:{job:w.job},cache:["job",w.job],auto:!0,onSuccess:o=>{d.data?.name&&b.submit(),r.submit()}}),b=C({url:"frappe.client.get_list",makeParams(o){return{doctype:"LMS Job Application",filters:{job:t.data?.name,user:d.data?.name}}}}),r=C({url:"frappe.client.get_count",makeParams(o){return{doctype:"LMS Job Application",filters:{job:t.data?.name}}}}),c=()=>{v.value=!0},u=o=>{window.location.href=`/login?redirect-to=/job-openings/${o}`},j=o=>{window.open(o,"_blank")};return q(()=>({title:t.data?.job_title,icon:M.favicon})),(o,i)=>{const T=B("router-link");return p(),f("div",ie,[a("header",le,[l(e(G),{class:"h-7",items:[{label:o.__("Jobs"),route:{name:"Jobs"}},{label:e(t).data?.job_title,route:{name:"JobDetail",params:{job:e(t).data?.name}}}]},null,8,["items"]),e(d).data?.name&&!e(x)?(p(),f("div",ne,[e(d).data.name==e(t).data?.owner?(p(),g(T,{key:0,to:{name:"JobForm",params:{jobName:e(t).data?.name}}},{default:s(()=>[l(e(k),null,{prefix:s(()=>[l(e(D),{class:"h-4 w-4 stroke-1.5"})]),default:s(()=>[m(" "+n(o.__("Edit")),1)]),_:1})]),_:1},8,["to"])):$("",!0),l(e(k),{onClick:i[0]||(i[0]=_=>j(e(t).data?.company_website))},{prefix:s(()=>[l(e(H),{class:"h-4 w-4 stroke-1.5"})]),default:s(()=>[m(" "+n(o.__("Visit Website")),1)]),_:1}),e(b).data?.length?(p(),g(e(S),{key:2,variant:"subtle",theme:"green",size:"lg"},{prefix:s(()=>[l(e(O),{class:"h-4 w-4"})]),default:s(()=>[m(" "+n(o.__("You have applied")),1)]),_:1})):(p(),g(e(k),{key:1,variant:"solid",onClick:i[1]||(i[1]=_=>c())},{prefix:s(()=>[l(e(E),{class:"h-4 w-4"})]),default:s(()=>[m(" "+n(o.__("Apply")),1)]),_:1}))])):e(x)?$("",!0):(p(),f("div",re,[l(e(k),{onClick:i[2]||(i[2]=_=>u(e(t).data?.name))},{default:s(()=>[a("span",null,n(o.__("Login to apply")),1)]),_:1})]))]),e(t).data?(p(),f("div",de,[a("div",pe,[a("div",ce,[a("div",ue,[a("img",{src:e(t).data.company_logo,class:"size-10 rounded-lg object-contain cursor-pointer mr-4",alt:e(t).data.company_name,onClick:i[3]||(i[3]=_=>j(e(t).data.company_website))},null,8,me),a("div",be,[a("div",_e,n(e(t).data.job_title),1),a("div",fe,n(e(t).data.company_name)+" - "+n(e(t).data.location)+", "+n(e(t).data.country),1)])]),a("div",ye,[l(e(S),{size:"lg"},{prefix:s(()=>[l(e(W),{class:"size-3 stroke-2 text-ink-gray-7"})]),default:s(()=>[m(" "+n(e(h)(e(t).data.creation).fromNow()),1)]),_:1}),l(e(S),{size:"lg"},{prefix:s(()=>[l(e(Y),{class:"size-3 stroke-2 text-ink-gray-7"})]),default:s(()=>[m(" "+n(e(t).data.type),1)]),_:1}),e(r).data?(p(),g(e(S),{key:0,size:"lg"},{prefix:s(()=>[l(e(K),{class:"size-3 stroke-2 text-ink-gray-7"})]),default:s(()=>[m(" "+n(e(r).data)+" "+n(e(r).data==1?o.__("applicant"):o.__("applicants")),1)]),_:1})):$("",!0)])]),a("div",ve,[i[6]||(i[6]=a("div",{class:"bg-surface-gray-2 h-px m-1 w-1/2"},null,-1)),a("div",null,[l(e(U),{class:"size-3 stroke-1 text-ink-gray-5"})]),i[7]||(i[7]=a("div",{class:"bg-surface-gray-2 h-px m-1 w-1/2"},null,-1))]),a("p",{innerHTML:e(t).data.description,class:"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal mt-12"},null,8,ge)]),l(oe,{modelValue:v.value,"onUpdate:modelValue":i[4]||(i[4]=_=>v.value=_),application:e(b),"onUpdate:application":i[5]||(i[5]=_=>Q(b)?b.value=_:null),job:e(t).data.name},null,8,["modelValue","application","job"])])):$("",!0)])}}};export{xe as default};
//# sourceMappingURL=JobDetail-DGIJdC9M.js.map
