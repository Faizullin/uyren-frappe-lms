{"version":3,"file":"LessonForm-Bc79aXpA.js","sources":["../../../../frontend-monorepo/website/src/components/Icons/Play.vue","../../../../frontend-monorepo/website/src/components/Modals/QuizInVideo.vue","../../../../frontend-monorepo/website/src/components/VideoBlock.vue","../../../../frontend-monorepo/website/src/components/Modals/ExplanationVideos.vue","../../../../frontend-monorepo/website/src/components/LessonHelp.vue","../../../../frontend-monorepo/website/src/components/MTextEditor/CodeBlockComponent.vue","../../../../frontend-monorepo/website/src/components/MTextEditor/CodeBlockPlugin.ts","../../../../frontend-monorepo/website/src/pages/LessonForm.vue"],"sourcesContent":["<template>\n\t<svg\n\t\twidth=\"20\"\n\t\theight=\"20\"\n\t\tviewBox=\"0 0 68 75\"\n\t\tfill=\"none\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t>\n\t\t<path\n\t\t\tfill-rule=\"evenodd\"\n\t\t\tclip-rule=\"evenodd\"\n\t\t\td=\"M0 6.78182C0 1.60212 5.5742 -1.65958 10.09 0.879521L64.09 31.2545C68.6916 33.8443 68.6916 40.4693 64.09 43.0595L10.09 73.4345C5.5744 75.9736 0 72.7119 0 67.5322V6.78182ZM26.2695 38.5201C26.2695 37.3248 25.2265 37.9342 26.2695 38.5201C27.332 39.1178 27.332 37.9225 26.2695 38.5201Z\"\n\t\t\tfill=\"white\"\n\t\t/>\n\t</svg>\n</template>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\ttitle: __('Add quiz to this video'),\n\t\t\tsize: '2xl',\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div class=\"text-base\">\n\t\t\t\t<div class=\"flex items-end gap-4\">\n\t\t\t\t\t<FormControl\n\t\t\t\t\t\t:label=\"__('Time in Video')\"\n\t\t\t\t\t\tv-model=\"quiz.time\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"2:15\"\n\t\t\t\t\t\tclass=\"flex-1\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tv-model=\"quiz.quiz\"\n\t\t\t\t\t\t:label=\"__('Quiz')\"\n\t\t\t\t\t\tdoctype=\"LMS Quiz\"\n\t\t\t\t\t\tclass=\"flex-1\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Button @click=\"addQuiz()\" variant=\"solid\">\n\t\t\t\t\t\t<template #prefix>\n\t\t\t\t\t\t\t<Plus class=\"w-4 h-4 stroke-1.5\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ __('Add') }}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"mt-10 mb-5\">\n\t\t\t\t\t<div class=\"font-medium mb-4\">\n\t\t\t\t\t\t{{ __('Quizzes in this video') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<ListView\n\t\t\t\t\t\tv-if=\"allQuizzes.length\"\n\t\t\t\t\t\t:columns=\"columns\"\n\t\t\t\t\t\t:rows=\"allQuizzes\"\n\t\t\t\t\t\trow-key=\"quiz\"\n\t\t\t\t\t\t:options=\"{\n\t\t\t\t\t\t\tshowTooltip: false,\n\t\t\t\t\t\t}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<ListHeader\n\t\t\t\t\t\t\tclass=\"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ListHeaderItem :item=\"item\" v-for=\"item in columns\">\n\t\t\t\t\t\t\t\t<template #prefix=\"{ item }\">\n\t\t\t\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t\t\t\tv-if=\"item.icon\"\n\t\t\t\t\t\t\t\t\t\t:is=\"item.icon\"\n\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 stroke-1.5 ml-4\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</ListHeaderItem>\n\t\t\t\t\t\t</ListHeader>\n\n\t\t\t\t\t\t<ListRows>\n\t\t\t\t\t\t\t<ListRow :row=\"row\" v-for=\"row in allQuizzes\">\n\t\t\t\t\t\t\t\t<template #default=\"{ column, item }\">\n\t\t\t\t\t\t\t\t\t<ListRowItem\n\t\t\t\t\t\t\t\t\t\t:item=\"row[column.key as keyof Quiz]\"\n\t\t\t\t\t\t\t\t\t\t:align=\"column.align\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div v-if=\"column.key == 'time'\" class=\"leading-5 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t{{ formatTimestamp(row[column.key as keyof Quiz]) }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div v-else class=\"leading-5 text-sm\">\n\t\t\t\t\t\t\t\t\t\t\t{{ row[column.key as keyof Quiz] }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</ListRowItem>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</ListRow>\n\t\t\t\t\t\t</ListRows>\n\n\t\t\t\t\t\t<ListSelectBanner>\n\t\t\t\t\t\t\t<template #actions=\"{ unselectAll, selections }\">\n\t\t\t\t\t\t\t\t<div class=\"flex gap-2\">\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t\t\t\t\t\t@click=\"removeQuiz(selections, unselectAll)\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Trash2 class=\"h-4 w-4 stroke-1.5\" />\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</ListSelectBanner>\n\t\t\t\t\t</ListView>\n\n\t\t\t\t\t<div v-else class=\"text-ink-gray-5 italic text-xs\">\n\t\t\t\t\t\t{{ __('No quizzes added yet.') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup lang=\"ts\">\nimport {\n\tDialog,\n\tButton,\n\tFormControl,\n\tListView,\n\tListHeader,\n\tListHeaderItem,\n\tListRows,\n\tListRow,\n\tListRowItem,\n\tListSelectBanner,\n\ttoast,\n} from '@mono/mono-frappe-ui'\nimport { computed, reactive, ref, watch } from 'vue'\nimport { Plus, Trash2 } from 'lucide-vue-next'\nimport { formatTimestamp } from '@/utils'\nimport Link from '@/components/Controls/Link.vue'\n\ntype Quiz = {\n\ttime: string\n\tquiz: string\n}\n\nconst show = defineModel()\nconst allQuizzes = ref<Quiz[]>([])\nconst quiz = reactive<Quiz>({\n\ttime: '',\n\tquiz: '',\n})\n\nconst props = defineProps({\n\tquizzes: {\n\t\ttype: Array as () => Quiz[],\n\t\tdefault: () => [],\n\t},\n\tsaveQuizzes: {\n\t\ttype: Function,\n\t\trequired: true,\n\t},\n\tduration: {\n\t\ttype: Number,\n\t\tdefault: 0,\n\t},\n})\n\nconst addQuiz = () => {\n\tquiz.time = `${getTimeInSeconds()}`\n\tif (!isTimeValid() || !isFormComplete()) return\n\n\tallQuizzes.value.push({\n\t\ttime: quiz.time,\n\t\tquiz: quiz.quiz,\n\t})\n\n\tprops.saveQuizzes(allQuizzes.value)\n\n\tquiz.time = ''\n\tquiz.quiz = ''\n}\n\nconst getTimeInSeconds = () => {\n\tif (quiz.time && !quiz.time.includes(':')) {\n\t\tquiz.time = `${quiz.time}:00`\n\t}\n\tconst timeParts = quiz.time.split(':')\n\tconst timeInSeconds = parseInt(timeParts[0]) * 60 + parseInt(timeParts[1])\n\n\treturn timeInSeconds\n}\n\nconst isTimeValid = () => {\n\tif (parseInt(quiz.time) > props.duration) {\n\t\ttoast.error(__('Time in video exceeds the total duration of the video.'))\n\t\treturn false\n\t}\n\treturn true\n}\n\nconst isFormComplete = () => {\n\tif (!quiz.time) {\n\t\ttoast.error(__('Please enter a valid timestamp'))\n\t\treturn false\n\t}\n\n\tif (!quiz.quiz) {\n\t\ttoast.error(__('Please select a quiz'))\n\t\treturn false\n\t}\n\n\treturn true\n}\n\nconst removeQuiz = (selections: string, unselectAll: () => void) => {\n\tArray.from(selections).forEach((selection) => {\n\t\tconst index = allQuizzes.value.findIndex((q) => q.quiz === selection)\n\t\tif (index !== -1) {\n\t\t\tallQuizzes.value.splice(index, 1)\n\t\t}\n\t\tunselectAll()\n\t})\n\tprops.saveQuizzes(allQuizzes.value)\n}\n\nwatch(\n\t() => props.quizzes,\n\t(newQuizzes) => {\n\t\tallQuizzes.value = newQuizzes\n\t},\n\t{ immediate: true }\n)\n\nconst columns = computed(() => {\n\treturn [\n\t\t{\n\t\t\tkey: 'quiz',\n\t\t\tlabel: __('Quiz'),\n\t\t},\n\t\t{\n\t\t\tkey: 'time',\n\t\t\tlabel: __('Time in Video (minutes)'),\n\t\t\talign: 'center',\n\t\t},\n\t]\n})\n</script>\n","<template>\n\t<div>\n\t\t<div v-if=\"quizzes.length && !showQuiz && readOnly\" class=\"leading-5\">\n\t\t\t{{\n\t\t\t\t__('This video contains {0} {1}:').format(\n\t\t\t\t\tquizzes.length,\n\t\t\t\t\tquizzes.length == 1 ? 'quiz' : 'quizzes'\n\t\t\t\t)\n\t\t\t}}\n\n\t\t\t<div v-for=\"(quiz, index) in quizzes\" class=\"pl-3 mt-1\">\n\t\t\t\t<span>\n\t\t\t\t\t{{ index + 1 }}. <span class=\"font-semibold\"> {{ quiz.quiz }} </span>\n\t\t\t\t</span>\n\t\t\t\t{{ __('at {0} minutes').format(formatTimestamp(quiz.time)) }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tv-if=\"!showQuiz\"\n\t\t\tref=\"videoContainer\"\n\t\t\tclass=\"video-block relative group\"\n\t\t>\n\t\t\t<video\n\t\t\t\t@timeupdate=\"updateTime\"\n\t\t\t\t@ended=\"videoEnded\"\n\t\t\t\t@click=\"togglePlay\"\n\t\t\t\toncontextmenu=\"return false\"\n\t\t\t\tclass=\"rounded-md border border-gray-100 cursor-pointer\"\n\t\t\t\tref=\"videoRef\"\n\t\t\t>\n\t\t\t\t<source :src=\"fileURL\" :type=\"type\" />\n\t\t\t</video>\n\t\t\t<div\n\t\t\t\tv-if=\"!playing\"\n\t\t\t\tclass=\"absolute inset-0 flex items-center justify-center cursor-pointer\"\n\t\t\t\t@click=\"playVideo\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"rounded-full p-4 pl-4.5\"\n\t\t\t\t\tstyle=\"\n\t\t\t\t\t\tbackground: radial-gradient(\n\t\t\t\t\t\t\tcircle,\n\t\t\t\t\t\t\trgba(0, 0, 0, 0.3) 0%,\n\t\t\t\t\t\t\trgba(0, 0, 0, 0.4) 50%\n\t\t\t\t\t\t);\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t<Play />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"flex items-center space-x-2 py-2 px-1 text-ink-white bg-gradient-to-b from-transparent to-black/75 absolute bottom-0 left-0 right-0 mx-auto rounded-md\"\n\t\t\t\t:class=\"{\n\t\t\t\t\t'invisible group-hover:visible': playing,\n\t\t\t\t}\"\n\t\t\t>\n\t\t\t\t<Button variant=\"ghost\" class=\"hover:bg-transparent\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Play\n\t\t\t\t\t\t\tv-if=\"!playing\"\n\t\t\t\t\t\t\t@click=\"playVideo\"\n\t\t\t\t\t\t\tclass=\"size-4 text-ink-gray-9\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Pause v-else @click=\"pauseVideo\" class=\"size-5 text-ink-white\" />\n\t\t\t\t\t</template>\n\t\t\t\t</Button>\n\n\t\t\t\t<div class=\"relative flex items-center w-full flex-1\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t:max=\"duration\"\n\t\t\t\t\t\tstep=\"0.1\"\n\t\t\t\t\t\tv-model=\"currentTime\"\n\t\t\t\t\t\t@input=\"changeCurrentTime\"\n\t\t\t\t\t\tclass=\"duration-slider h-1\"\n\t\t\t\t\t/>\n\t\t\t\t\t<!-- QUIZ MARKERS -->\n\t\t\t\t\t<div class=\"absolute top-0 left-0 w-full h-full pointer-events-none\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-for=\"(quiz, index) in quizzes\"\n\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t:style=\"getQuizMarkerStyle(quiz.time)\"\n\t\t\t\t\t\t\tclass=\"absolute top-0 h-full w-2 bg-surface-amber-3\"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<span class=\"text-sm font-medium\">\n\t\t\t\t\t{{ formatSeconds(currentTime) }} / {{ formatSeconds(duration) }}\n\t\t\t\t</span>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t@click=\"toggleMute\"\n\t\t\t\t\tclass=\"hover:bg-transparent\"\n\t\t\t\t>\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Volume2 v-if=\"!muted\" class=\"size-5 text-ink-white\" />\n\t\t\t\t\t\t<VolumeX v-else class=\"size-5 text-ink-white\" />\n\t\t\t\t\t</template>\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"ghost\"\n\t\t\t\t\t@click=\"toggleFullscreen\"\n\t\t\t\t\tclass=\"hover:bg-transparent\"\n\t\t\t\t>\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<Maximize class=\"size-5 text-ink-white\" />\n\t\t\t\t\t</template>\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t\t<Quiz\n\t\t\tv-if=\"showQuiz\"\n\t\t\t:quizName=\"currentQuiz\"\n\t\t\t:inVideo=\"true\"\n\t\t\t:backToVideo=\"resumeVideo\"\n\t\t/>\n\t\t<div v-if=\"!readOnly\" @click=\"showQuizModal = true\">\n\t\t\t<Button>\n\t\t\t\t{{ __('Add Quiz to Video') }}\n\t\t\t</Button>\n\t\t</div>\n\t</div>\n\t<QuizInVideo\n\t\tv-model=\"showQuizModal\"\n\t\t:quizzes=\"quizzes\"\n\t\t:saveQuizzes=\"saveQuizzes\"\n\t\t:duration=\"duration\"\n\t/>\n\t<Dialog\n\t\tv-model=\"showQuizLoader\"\n\t\t:options=\"{\n\t\t\tsize: 'sm',\n\t\t}\"\n\t>\n\t\t<template #body>\n\t\t\t<div class=\"flex flex-col space-y-2 p-5 text-base leading-5\">\n\t\t\t\t<span class=\"font-semibold\">\n\t\t\t\t\t{{ __('Time for a Quiz') }}\n\t\t\t\t</span>\n\t\t\t\t<span>\n\t\t\t\t\t{{\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Complete the upcoming quiz to continue watching the video. The quiz will open in {0} {1}.'\n\t\t\t\t\t\t).format(quizLoadTimer, quizLoadTimer === 1 ? 'second' : 'seconds')\n\t\t\t\t\t}}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport { ref, onMounted, computed, watch } from 'vue'\nimport { Pause, Maximize, Volume2, VolumeX } from 'lucide-vue-next'\nimport { Button, Dialog } from '@mono/mono-frappe-ui'\nimport { formatSeconds, formatTimestamp } from '@/utils'\nimport Play from '@/components/Icons/Play.vue'\nimport QuizInVideo from '@/components/Modals/QuizInVideo.vue'\n\nconst videoRef = ref(null)\nconst videoContainer = ref(null)\nlet playing = ref(false)\nlet currentTime = ref(0)\nlet duration = ref(0)\nlet muted = ref(false)\nconst showQuizModal = ref(false)\nconst showQuiz = ref(false)\nconst showQuizLoader = ref(false)\nconst quizLoadTimer = ref(0)\nconst currentQuiz = ref(null)\nconst nextQuiz = ref({})\n\nconst props = defineProps({\n\tfile: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\ttype: {\n\t\ttype: String,\n\t\tdefault: 'video/mp4',\n\t},\n\treadOnly: {\n\t\ttype: String,\n\t\tdefault: true,\n\t},\n\tquizzes: {\n\t\ttype: Array,\n\t\tdefault: () => [],\n\t},\n\tsaveQuizzes: {\n\t\ttype: Function,\n\t},\n})\n\nonMounted(() => {\n\tupdateCurrentTime()\n\tupdateNextQuiz()\n})\n\nconst updateCurrentTime = () => {\n\tsetTimeout(() => {\n\t\tvideoRef.value.onloadedmetadata = () => {\n\t\t\tduration.value = videoRef.value.duration\n\t\t}\n\t\tvideoRef.value.ontimeupdate = () => {\n\t\t\tcurrentTime.value = videoRef.value?.currentTime || currentTime.value\n\t\t\tif (currentTime.value >= nextQuiz.value.time) {\n\t\t\t\tvideoRef.value.pause()\n\t\t\t\tplaying.value = false\n\t\t\t\tvideoRef.value.onTimeupdate = null\n\t\t\t\tcurrentQuiz.value = nextQuiz.value.quiz\n\t\t\t\tquizLoadTimer.value = 7\n\t\t\t}\n\t\t}\n\t}, 0)\n}\n\nwatch(quizLoadTimer, () => {\n\tif (quizLoadTimer.value > 0) {\n\t\tshowQuizLoader.value = true\n\t\tsetTimeout(() => {\n\t\t\tquizLoadTimer.value -= 1\n\t\t}, 1000)\n\t} else {\n\t\tshowQuizLoader.value = false\n\t\tshowQuiz.value = true\n\t}\n})\n\nconst resumeVideo = (restart = false) => {\n\tshowQuiz.value = false\n\tcurrentQuiz.value = null\n\tupdateCurrentTime()\n\tsetTimeout(() => {\n\t\tvideoRef.value.currentTime = restart ? 0 : currentTime.value\n\t\tvideoRef.value.play()\n\t\tplaying.value = true\n\t\tupdateNextQuiz()\n\t}, 0)\n}\n\nconst updateNextQuiz = () => {\n\tif (!props.quizzes.length) return\n\n\tprops.quizzes.forEach((quiz) => {\n\t\tif (typeof quiz.time == 'string' && quiz.time.includes(':')) {\n\t\t\tlet time = quiz.time.split(':')\n\t\t\tlet timeInSeconds = parseInt(time[0]) * 60 + parseInt(time[1])\n\t\t\tquiz.time = timeInSeconds\n\t\t}\n\t})\n\n\tprops.quizzes.sort((a, b) => a.time - b.time)\n\n\tconst nextQuizIndex = props.quizzes.findIndex(\n\t\t(quiz) => quiz.time > currentTime.value\n\t)\n\tif (nextQuizIndex !== -1) {\n\t\tnextQuiz.value = props.quizzes[nextQuizIndex]\n\t} else {\n\t\tnextQuiz.value = {}\n\t}\n}\n\nconst fileURL = computed(() => {\n\treturn props.file\n})\n\nconst playVideo = () => {\n\tvideoRef.value.play()\n\tplaying.value = true\n}\n\nconst pauseVideo = () => {\n\tvideoRef.value.pause()\n\tplaying.value = false\n}\n\nconst togglePlay = () => {\n\tif (playing.value) {\n\t\tpauseVideo()\n\t} else {\n\t\tplayVideo()\n\t}\n}\n\nconst videoEnded = () => {\n\tplaying.value = false\n}\n\nconst toggleMute = () => {\n\tvideoRef.value.muted = !videoRef.value.muted\n\tmuted.value = videoRef.value.muted\n}\n\nconst changeCurrentTime = () => {\n\tvideoRef.value.currentTime = currentTime.value\n\tupdateNextQuiz()\n}\n\nconst toggleFullscreen = () => {\n\tif (document.fullscreenElement) {\n\t\tdocument.exitFullscreen()\n\t} else {\n\t\tvideoContainer.value.requestFullscreen()\n\t}\n}\n\nconst getQuizMarkerStyle = (time) => {\n\tconst percentage = ((time - 5) / Math.ceil(duration.value)) * 100\n\treturn {\n\t\tleft: `${percentage}%`,\n\t}\n}\n</script>\n\n<style scoped>\n.video-block {\n\twidth: 100%;\n\tmargin: 0 auto;\n}\n\n.video-block video {\n\twidth: 100%;\n\theight: auto;\n}\n\niframe {\n\twidth: 100%;\n\tmin-height: 500px;\n}\n\n.duration-slider {\n\t-webkit-appearance: none;\n\tappearance: none;\n\tborder-radius: 10px;\n\tbackground-color: theme('colors.gray.600');\n\tcursor: pointer;\n}\n\n.duration-slider::-webkit-slider-thumb {\n\twidth: 2px;\n\tborder-radius: 50%;\n\t-webkit-appearance: none;\n\tbackground-color: theme('colors.white');\n}\n\n@media screen and (-webkit-min-device-pixel-ratio: 0) {\n\tinput[type='range'] {\n\t\toverflow: hidden;\n\t\twidth: 100%;\n\t\t-webkit-appearance: none;\n\t}\n\n\tinput[type='range']::-webkit-slider-thumb {\n\t\t-webkit-appearance: none;\n\t\tcursor: pointer;\n\t\tbox-shadow: -500px 0 0 500px theme('colors.white');\n\t}\n}\n</style>\n","<template>\n\t<Dialog\n\t\tv-model=\"show\"\n\t\t:options=\"{\n\t\t\tsize: '4xl',\n\t\t\ttitle: title,\n\t\t}\"\n\t>\n\t\t<template #body-content>\n\t\t\t<div>\n\t\t\t\t<VideoBlock :file=\"file\" />\n\t\t\t</div>\n\t\t</template>\n\t</Dialog>\n</template>\n<script setup>\nimport { Dialog } from '@mono/mono-frappe-ui'\nimport { computed } from 'vue'\nimport VideoBlock from '@/components/VideoBlock.vue'\n\nconst show = defineModel()\n\nconst props = defineProps({\n\ttype: {\n\t\ttype: [String, null],\n\t\trequired: true,\n\t},\n\ttitle: {\n\t\ttype: [String, null],\n\t\trequired: true,\n\t},\n})\n\nconst file = computed(() => {\n\tif (props.type == 'youtube') return '/assets/lms/frontend/Youtube.mp4'\n\tif (props.type == 'quiz') return '/assets/lms/frontend/Quiz.mp4'\n\tif (props.type == 'upload') return '/assets/lms/frontend/Upload.mp4'\n\tif (props.type == 'remove') return '/assets/lms/frontend/Remove.mp4'\n})\n</script>\n","<template>\n\t<div class=\"space-y-5 text-ink-gray-9\">\n\t\t<div class=\"space-y-2\">\n\t\t\t<div class=\"flex items-center text-sm font-medium space-x-2\">\n\t\t\t\t<span>\n\t\t\t\t\t{{ __('What does include in preview mean?') }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"text-xs text-ink-gray-5 mb-1 leading-5\">\n\t\t\t\t{{\n\t\t\t\t\t__(\n\t\t\t\t\t\t'If Include in Preview is enabled for a lesson then the lesson will also be accessible to non logged in users.'\n\t\t\t\t\t)\n\t\t\t\t}}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"space-y-2\" v-for=\"(item, key) in contentMap\" :key=\"key\">\n\t\t\t<div\n\t\t\t\tclass=\"flex items-center text-sm font-medium space-x-2 cursor-pointer\"\n\t\t\t\t@click=\"openHelpDialog(key)\"\n\t\t\t>\n\t\t\t\t<span>\n\t\t\t\t\t{{ __(item.title) }}\n\t\t\t\t</span>\n\t\t\t\t<Info class=\"w-3 h-3 text-ink-gray-7\" />\n\t\t\t</div>\n\t\t\t<div class=\"text-xs text-ink-gray-5 mb-1 leading-5\">\n\t\t\t\t{{ __(item.description) }}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<ExplanationVideos v-model=\"showExplanation\" :title=\"title\" :type=\"type\" />\n</template>\n<script setup>\nimport { Info } from 'lucide-vue-next'\nimport { ref } from 'vue'\nimport ExplanationVideos from '@/components/Modals/ExplanationVideos.vue'\n\nconst showExplanation = ref(false)\nconst type = ref(null)\nconst title = ref(null)\nconst contentMap = {\n\tquiz: {\n\t\ttitle: 'How to add a Quiz?',\n\t\tdescription:\n\t\t\t'Click on the add icon in the editor and select Quiz from the menu. It opens up a dialog, where you can either select a quiz from the list or create a new quiz. When you select the Create New option it redirects you to the quiz creation page.',\n\t},\n\tupload: {\n\t\ttitle: 'How to upload content from your system?',\n\t\tdescription:\n\t\t\t'To upload Image, Video, Audio or PDF from your system, click on the add icon and select upload from the menu. Then choose the file you want to add to the lesson and it gets added to your lesson.',\n\t},\n\tyoutube: {\n\t\ttitle: 'How to add a YouTube Video?',\n\t\tdescription:\n\t\t\t'Copy the URL of the video from YouTube and paste it in the editor.',\n\t},\n\tremove: {\n\t\ttitle: 'How to remove an embed?',\n\t\tdescription:\n\t\t\t'To remove an embed like YouTube or Vimeo, put your cursor on the line below the embed, then drag your mouse cursor upwards to select the embed. Once the embed is selected press BackSpace.',\n\t},\n}\n\nconst openHelpDialog = (contentType) => {\n\ttype.value = contentType\n\ttitle.value = contentMap[contentType].title\n\tshowExplanation.value = true\n}\n</script>\n","<template>\n  <node-view-wrapper>\n    <div class=\"code-block-container\">\n      <div class=\"code-block-controls\">\n        <button class=\"action-btn\" @click=\"copyCode\" title=\"Copy code\">\n          <Copy class=\"h-4 w-4\" />\n        </button>\n        <button\n          v-if=\"node.attrs.allowRun\"\n          class=\"action-btn\"\n          @click=\"runCode\"\n          :disabled=\"isRunning\"\n          title=\"Run code\"\n        >\n          <Play v-if=\"!isRunning\" class=\"h-4 w-4\" />\n          <Loader v-else class=\"h-4 w-4 animate-spin\" />\n        </button>\n        <button\n          v-if=\"isEditorMode\"\n          class=\"settings-btn\"\n          @click=\"showSettings = true\"\n          title=\"Code-block settings\"\n        >\n          <Settings class=\"h-4 w-4\" />\n        </button>\n      </div>\n      <pre><code><node-view-content /></code></pre>\n\n      <!-- Console output for code execution -->\n      <div v-if=\"showOutput && codeOutput\" class=\"code-console\">\n        <div class=\"console-header\">\n          <span class=\"console-title\">Output:</span>\n          <button @click=\"clearOutput\" class=\"clear-btn\" title=\"Clear output\">\n            <X class=\"h-3 w-3\" />\n          </button>\n        </div>\n        <pre class=\"console-content\" :class=\"{ 'error': isError }\">{{ codeOutput }}</pre>\n      </div>\n    </div>\n    <Dialog v-if=\"isEditorMode\" v-model=\"showSettings\">\n      <template #body-title>\n        <h3>Code-block options</h3>\n      </template>\n\n      <template #body-content>\n\n        <Tabs as=\"div\" :tabs=\"[\n          { label: 'Options', content: 'Options' },\n          { label: 'Run', content: 'Run' }\n        ]\" v-model=\"tabState.index\" class=\"mt-4\">\n          <template #tab-panel=\"{ tab }\">\n            <div v-if=\"tabState.index === 0\">\n              <!-- First tab: all options -->\n              <FormControl type=\"autocomplete\" :options=\"languages\" size=\"sm\" variant=\"subtle\"\n                placeholder=\"Select language\" :disabled=\"false\" label=\"Language\" v-model=\"selectValue\" class=\"mb-2\" />\n              <FormControl type=\"checkbox\" v-model=\"tmp.allowRun\" label=\"Allow run\" class=\"mb-2\" />\n              <FormControl type=\"checkbox\" v-model=\"tmp.isStatic\" label=\"Is static\" class=\"mb-2\" />\n            </div>\n            <div v-else-if=\"tabState.index === 1\">\n              <!-- Second tab: textarea, disabled if not static -->\n              <FormControl type=\"textarea\" v-model=\"codeInput\" label=\"Code Input\" placeholder=\"Enter your code here...\"\n                :disabled=\"!tmp.isStatic\" class=\"mb-2\" />\n              <Button @click=\"handleRunCode\" :loading=\"isRunning\" class=\"mb-2\" :disabled=\"!tmp.isStatic\">\n                Run Code\n              </Button>\n              <div class=\"code-output\" v-if=\"codeOutput !== ''\">\n                <h4>Output:</h4>\n                <pre>{{ codeOutput }}</pre>\n              </div>\n            </div>\n          </template>\n        </Tabs>\n      </template>\n\n      <template #actions>\n        <Button variant=\"solid\" @click=\"saveSettings\">Save</Button>\n        <Button class=\"ml-2\" @click=\"showSettings = false\">Cancel</Button>\n      </template>\n    </Dialog>\n  </node-view-wrapper>\n</template>\n\n<script setup>\n/* core tiptap helpers */\nimport { NodeViewContent, nodeViewProps, NodeViewWrapper } from '@tiptap/vue-3'\nimport { Button, Dialog, FormControl, Tabs } from '@mono/mono-frappe-ui'\nimport { Settings, Copy, Play, Loader, X } from 'lucide-vue-next'\nimport { computed, reactive, ref, watch } from 'vue'\n\nconst props = defineProps(nodeViewProps)\n\n// ----- reactive state -----\nconst showSettings = ref(false)\n\n/* copy current attrs into a temp object for the dialog */\nconst tmp = reactive({\n  allowRun: props.node.attrs.allowRun ?? false,\n  isStatic: props.node.attrs.isStatic ?? false,\n  language: props.node.attrs.language || null,\n})\n\n\nconst selectValue = ref(null)\n\nwatch(selectValue, (newVal) => {\n  console.log('selectValue changed:', newVal)\n  const attrs = props.node.attrs\n\n  if (newVal && newVal.value !== attrs.language) {\n    console.log('Updating language from', attrs, 'to', newVal.value)\n    props.updateAttributes({ language: newVal.value })\n  }\n})\n\n/* you already had this helper — unchanged */\nconst languages = computed(() =>\n  props.extension.options.lowlight\n    .listLanguages()\n    .map((l) => ({ label: l, value: l }))\n    .concat([{ label: 'html', value: 'xml' }])\n    .sort((a, b) => a.label.localeCompare(b.label))\n)\n\n// ----- dialog logic -----\nfunction saveSettings() {\n  /* write values back to the node, including language */\n  props.updateAttributes({\n    allowRun: tmp.allowRun,\n    isStatic: tmp.isStatic,\n    language: selectValue.value ? selectValue.value.value : null,\n  })\n  console.log('Settings saved:', {\n    allowRun: tmp.allowRun,\n    isStatic: tmp.isStatic,\n    language: selectValue.value ? selectValue.value.value : null,\n  })\n  showSettings.value = false\n}\n\n// Set selectValue when dialog opens, keep in sync with node attrs\nwatch(\n  () => showSettings.value,\n  (open) => {\n    if (open) {\n      const lang = props.node.attrs.language\n      selectValue.value = lang\n        ? languages.value.find((l) => l.value === lang) || null\n        : null\n    }\n  }\n)\n\nconst tabState = ref({ index: 0 })\nconst codeInput = ref('')\nconst codeOutput = ref('')\nconst isRunning = ref(false)\nconst showOutput = ref(false)\nconst isError = ref(false)\n\n// Detect if we're in editor mode (has node and editor props)\nconst isEditorMode = computed(() => {\n  return props.node && props.editor && typeof props.updateAttributes === 'function'\n})\n\n// Copy code functionality\nasync function copyCode() {\n  try {\n    const codeText = props.node.textContent || ''\n    await navigator.clipboard.writeText(codeText)\n    // You could add a toast notification here\n    console.log('Code copied to clipboard')\n  } catch (err) {\n    console.error('Failed to copy code:', err)\n  }\n}\n\n// Run code functionality\nasync function runCode() {\n  if (!props.node.attrs.allowRun) return\n\n  isRunning.value = true\n  isError.value = false\n  showOutput.value = true\n\n  try {\n    const codeText = props.node.textContent || ''\n    const language = props.node.attrs.language || 'javascript'\n\n    // Call your code execution API here\n    const result = await executeCode(codeText, language)\n    codeOutput.value = result\n  } catch (error) {\n    isError.value = true\n    codeOutput.value = error.message || 'An error occurred while running the code'\n  } finally {\n    isRunning.value = false\n  }\n}\n\n// Clear output\nfunction clearOutput() {\n  codeOutput.value = ''\n  showOutput.value = false\n  isError.value = false\n}\n\n// Execute code using the actual API\nasync function executeCode(code, language) {\n  try {\n    const apiUrl = import.meta.env.VITE_APP_SERVICE_V2_ABS_API_URL || 'http://82.115.49.85:8001'\n    const response = await fetch(`${apiUrl}/api/v1/executions/execute-immediate`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        code: code,\n        language: language || 'javascript'\n      })\n    })\n\n    const result = await response.json()\n\n    if (!response.ok) {\n      // Handle validation error (422) or other errors\n      if (response.status === 422 && result.detail) {\n        const errors = result.detail.map(err => `${err.loc.join('.')}: ${err.msg}`).join('\\n')\n        throw new Error(`Validation Error:\\n${errors}`)\n      }\n      throw new Error(result.message || `HTTP ${response.status}: ${response.statusText}`)\n    }\n\n    // Format the successful response\n    let output = ''\n    if (result.status === 'string') {\n      output += `Status: ${result.status}\\n`\n    }\n    if (result.output) {\n      output += `Output:\\n${result.output}\\n`\n    }\n    if (result.error_output) {\n      output += `Errors:\\n${result.error_output}\\n`\n    }\n    if (result.execution_time) {\n      output += `Execution Time: ${result.execution_time}\\n`\n    }\n    if (result.memory_usage) {\n      output += `Memory Usage: ${result.memory_usage}\\n`\n    }\n    if (result.message) {\n      output += `Message: ${result.message}`\n    }\n\n    return output.trim() || 'Code executed successfully (no output)'\n\n  } catch (error) {\n    if (error instanceof TypeError && error.message.includes('fetch')) {\n      throw new Error('Failed to connect to code execution service. Please check your network connection.')\n    }\n    throw error\n  }\n}\n\nasync function handleRunCode() {\n  isRunning.value = true\n  try {\n    // codeOutput.value = await runCode(\n    //   selectValue.value ? selectValue.value.value : '',\n    //   codeInput.value\n    // )\n  } catch (e) {\n    codeOutput.value = String(e)\n  } finally {\n    isRunning.value = false\n  }\n}\n</script>\n\n<style>\n/* CodeBlock styles */\n.code-block {\n  position: relative;\n}\n\n.code-block-container {\n  position: relative;\n}\n\n.code-block-controls {\n  position: absolute;\n  top: 0.25rem;\n  right: 0.25rem;\n  display: flex;\n  flex-direction: row;\n  gap: 0.25rem;\n  z-index: 10;\n}\n\n.action-btn,\n.settings-btn {\n  background: rgba(255, 255, 255, 0.1);\n  border: none;\n  padding: 0.25rem;\n  cursor: pointer;\n  opacity: 0.7;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  border-radius: 0.25rem;\n  color: #fff;\n}\n\n.action-btn:hover,\n.settings-btn:hover {\n  opacity: 1;\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.action-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* Console output styles */\n.code-console {\n  background: #1a1a1a;\n  border: 1px solid #333;\n  border-radius: 0.5rem;\n  margin-top: 0.5rem;\n  overflow: hidden;\n}\n\n.console-header {\n  background: #2a2a2a;\n  padding: 0.5rem 0.75rem;\n  display: flex;\n  justify-content: between;\n  align-items: center;\n  border-bottom: 1px solid #333;\n}\n\n.console-title {\n  color: #fff;\n  font-size: 0.75rem;\n  font-weight: 600;\n  flex: 1;\n}\n\n.clear-btn {\n  background: none;\n  border: none;\n  color: #999;\n  cursor: pointer;\n  padding: 0.125rem;\n  border-radius: 0.125rem;\n  transition: color 0.2s;\n}\n\n.clear-btn:hover {\n  color: #fff;\n}\n\n.console-content {\n  background: #0d0d0d;\n  color: #fff;\n  padding: 0.75rem;\n  margin: 0;\n  font-family: ui-monospace, Menlo, Monaco, 'Cascadia Mono', 'Segoe UI Mono',\n    'Roboto Mono', 'Oxygen Mono', 'Ubuntu Mono', 'Source Code Pro', 'Fira Mono',\n    'Droid Sans Mono', 'Consolas', 'Courier New', monospace;\n  font-size: 12px;\n  white-space: pre-wrap;\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.console-content.error {\n  color: #ff6b6b;\n}\n\n.ProseMirror pre {\n  background: #0d0d0d;\n  color: #fff;\n  font-family: ui-monospace, Menlo, Monaco, 'Cascadia Mono', 'Segoe UI Mono',\n    'Roboto Mono', 'Oxygen Mono', 'Ubuntu Mono', 'Source Code Pro', 'Fira Mono',\n    'Droid Sans Mono', 'Consolas', 'Courier New', monospace;\n  padding: 0.75rem 1rem;\n  border-radius: 0.75rem;\n  caret-color: #fff;\n}\n\n.ProseMirror pre code {\n  color: inherit;\n  padding: 0;\n  background: none;\n  font-size: 12px;\n}\n\n.ProseMirror pre .hljs-comment,\n.ProseMirror pre .hljs-quote {\n  color: #999;\n}\n\n.ProseMirror pre .hljs-variable,\n.ProseMirror pre .hljs-template-variable,\n.ProseMirror pre .hljs-attribute,\n.ProseMirror pre .hljs-tag,\n.ProseMirror pre .hljs-name,\n.ProseMirror pre .hljs-regexp,\n.ProseMirror pre .hljs-link,\n.ProseMirror pre .hljs-selector-id,\n.ProseMirror pre .hljs-selector-class {\n  color: #f2777a;\n}\n\n.ProseMirror pre .hljs-number,\n.ProseMirror pre .hljs-meta,\n.ProseMirror pre .hljs-built_in,\n.ProseMirror pre .hljs-builtin-name,\n.ProseMirror pre .hljs-literal,\n.ProseMirror pre .hljs-type,\n.ProseMirror pre .hljs-params {\n  color: #f99157;\n}\n\n.ProseMirror pre .hljs-string,\n.ProseMirror pre .hljs-symbol,\n.ProseMirror pre .hljs-bullet {\n  color: #99cc99;\n}\n\n.ProseMirror pre .hljs-title,\n.ProseMirror pre .hljs-section {\n  color: #ffcc66;\n}\n\n.ProseMirror pre .hljs-keyword,\n.ProseMirror pre .hljs-selector-tag {\n  color: #6196cc;\n}\n\n.ProseMirror pre .hljs-emphasis {\n  font-style: italic;\n}\n\n.ProseMirror pre .hljs-strong {\n  font-weight: 700;\n}\n</style>\n","import { CodeBlockLowlight } from '@tiptap/extension-code-block-lowlight'\nimport { VueNodeViewRenderer } from '@tiptap/vue-3'\nimport CodeBlockComponent from './CodeBlockComponent.vue'\n\ninterface CodeBlockPluginOptions {\n  /**\n   * A callback that receives `(node, view, getPos)`\n   * so you can open your dialog.\n   */\n  onSettingsClick: (node: any, view: any, getPos: () => number) => void\n}\n\nconst CodeBlockPlugin = CodeBlockLowlight.extend<CodeBlockPluginOptions>({\n  name: 'codeBlockLowlight',\n  // group: 'block',\n  // content: 'text*',\n  // marks: '',\n  // code: true,\n  // defining: true,\n  // isolating: true,\n\n  /* ------------------------------------------------------------------ */\n  /* 2️⃣  ATTRIBUTES                                                     */\n  /* ------------------------------------------------------------------ */\n  addAttributes() {\n    return {\n      language: {\n        default: null as string | null,\n        parseHTML: (el: HTMLElement) => {\n          return el.getAttribute('data-language') || null\n        },\n        renderHTML: (attrs) => {\n          return attrs.language ? { 'data-language': attrs.language } : {}\n        },\n      },\n\n      allowRun: {\n        default: false,\n        parseHTML: (el: HTMLElement) => {\n          return el.getAttribute('data-allow-run') === 'true'\n        },\n        renderHTML: (attrs) => (attrs.allowRun ? { 'data-allow-run': 'true' } : {}),\n      },\n\n      isStatic: {\n        default: false,\n        parseHTML: (el: HTMLElement) => {\n          return el.getAttribute('data-is-static') === 'true'\n        },\n        renderHTML: (attrs) => (attrs.isStatic ? { 'data-is-static': 'true' } : {}),\n      },\n    }\n  },\n  // parseHTML() {\n  //   return [\n  //     {\n  //       tag: 'pre[data-type=\"codeBlockWithSettings\"]',\n  //     },\n  //   ]\n  // },\n\n  // renderHTML({ HTMLAttributes }) {\n  //   return [\n  //     'pre',\n  //     mergeAttributes(HTMLAttributes, { 'data-type': 'codeBlockWithSettings' }),\n  //     ['code', 0],\n  //   ]\n  // },\n\n  addNodeView() {\n    return VueNodeViewRenderer(CodeBlockComponent)\n  },\n})\n\nexport default CodeBlockPlugin\n","<template>\n  <div class=\"\">\n    <div class=\"grid md:grid-cols-[75%,25%] h-screen\">\n      <div class=\"border-r\">\n        <header\n          class=\"sticky top-0 z-10 flex flex-col md:flex-row md:items-center justify-between border-b overflow-hidden bg-surface-white px-3 py-2.5 sm:px-5\">\n          <Breadcrumbs class=\"text-ellipsis\" :items=\"breadcrumbs\" />\n          <Button variant=\"solid\" @click=\"saveLesson({ showSuccessMessage: true })\" class=\"mt-3 md:mt-0\">\n            {{ __('Save') }}\n          </Button>\n        </header>\n        <div class=\"py-5\">\n          <div class=\"w-5/6 mx-auto\">\n            <FormControl v-model=\"lesson.title\" label=\"Title\" class=\"mb-4\" :required=\"true\" />\n            <FormControl v-model=\"lesson.include_in_preview\" type=\"checkbox\" label=\"Include in Preview\" />\n          </div>\n          <div class=\"border-t mt-4\">\n            <div class=\"w-5/6 mx-auto pt-4\">\n              <div class=\"flex justify-between cursor-pointer\" @click=\"\n                () => {\n                  openInstructorEditor = !openInstructorEditor\n                }\n              \">\n                <label class=\"block font-medium text-ink-gray-5 mb-1\">\n                  {{ __('Instructor Notes') }}\n                </label>\n                <ChevronRight class=\"stroke-2 h-5 w-5 text-ink-gray-5\" :class=\"{\n                  'rotate-90 transform duration-200': openInstructorEditor,\n                  'duration-200': !openInstructorEditor,\n                }\" />\n              </div>\n              <div v-show=\"openInstructorEditor\">\n                <TextEditor editor-class=\"prose-sm min-h-[4rem] border rounded-b-lg border-t-0 p-2\" :content=\"instructorNotesHtml\"\n                  placeholder=\"Type instructor notes...\" @change=\"(val) => instructorNotesHtml = val\" :bubbleMenu=\"true\"\n                  :fixed-menu=\"true\" :extensions=\"contentExtensions\" />\n              </div>\n            </div>\n          </div>\n          <div class=\"border-t mt-4\">\n            <div class=\"w-5/6 mx-auto pt-4\">\n              <label class=\"block font-medium text-ink-gray-5 mb-1\">\n                {{ __('Content') }}\n              </label>\n              <!-- <div\n\t\t\t\t\t\t\t\tid=\"content\"\n\t\t\t\t\t\t\t\tclass=\"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal py-3\"\n\t\t\t\t\t\t\t></div> -->\n              <TextEditor editor-class=\"prose-sm min-h-[4rem] border rounded-b-lg border-t-0 p-2\" :content=\"contentHtml\"\n                placeholder=\"Type something...\" @change=\"(val) => contentHtml = val\" :bubbleMenu=\"true\"\n                :fixed-menu=\"true\" :extensions=\"contentExtensions\" ref=\"editorRef\" />\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"\">\n        <div class=\"sticky top-0 p-5\">\n          <LessonHelp />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport {\n  Breadcrumbs,\n  Button,\n  createResource,\n  FormControl,\n  toast,\n  usePageMeta,\n} from '@mono/mono-frappe-ui'\nimport {\n  computed,\n  inject,\n  onBeforeUnmount,\n  onMounted,\n  reactive,\n  ref,\n} from 'vue'\nimport { sessionStore } from '../stores/session'\n// import EditorJS from '@editorjs/editorjs'\nimport LessonHelp from '@/components/LessonHelp.vue'\nimport { capture, startRecording, stopRecording } from '@/telemetry'\nimport { enablePlyr, getEditorTools } from '@/utils'\nimport { useOnboarding } from '@mono/mono-frappe-ui/frappe'\nimport { ChevronRight } from 'lucide-vue-next'\n\n\nimport CodeBlockPlugin from '@/components/MTextEditor/CodeBlockPlugin.ts'\nimport { TextEditor } from '@mono/mono-frappe-ui'\nimport { common, createLowlight } from 'lowlight'\nconst lowlight = createLowlight(common)\n\n// import {CodeBlockLowlight} from '@tiptap/extension-code-block-lowlight'\nconst contentHtml = ref('')\nconst instructorNotesHtml = ref('')\nconst contentExtensions = {\n  \"codeBlockLowlight\": CodeBlockPlugin.configure({ lowlight }),\n}\n\nconst { brand } = sessionStore()\nconst editor = ref(null)\nconst instructorEditor = ref(null)\nconst user = inject('$user')\nconst openInstructorEditor = ref(false)\nconst { updateOnboardingStep } = useOnboarding('learning')\nlet showSuccessMessage = false\n\nconst props = defineProps({\n  courseName: {\n    type: String,\n    required: true,\n  },\n  chapterNumber: {\n    type: String,\n    required: true,\n  },\n  lessonNumber: {\n    type: String,\n    required: true,\n  },\n})\n\nonMounted(() => {\n  if (!user.data?.is_moderator && !user.data?.is_instructor) {\n    window.location.href = '/login'\n  }\n  capture('lesson_form_opened')\n  startRecording()\n  // editor.value = renderEditor('content')\n  // instructorEditor.value = renderEditor('instructor-notes')\n  // window.addEventListener('keydown', keyboardShortcut)\n  enablePlyr()\n\n\n\n\n})\n\nconst renderEditor = (holder) => {\n  return new EditorJS({\n    holder: holder,\n    tools: getEditorTools(true),\n    autofocus: true,\n    defaultBlock: 'markdown',\n    onChange: async (api, event) => {\n      enablePlyr()\n    },\n  })\n}\n\nconst lesson = reactive({\n  title: '',\n  include_in_preview: false,\n  body: '',\n  instructor_notes: '',\n  content: '',\n  instructor_content: '',\n})\n\nconst lessonDetails = createResource({\n  url: 'lms.lms.utils.get_lesson_creation_details',\n  params: {\n    course: props.courseName,\n    chapter: props.chapterNumber,\n    lesson: props.lessonNumber,\n  },\n  auto: true,\n  onSuccess(data) {\n    if (data.lesson) {\n      Object.keys(data.lesson).forEach((key) => {\n        lesson[key] = data.lesson[key]\n      })\n      lesson.include_in_preview = data?.lesson?.include_in_preview\n        ? true\n        : false\n      addLessonContent(data)\n    }\n  },\n})\n\nconst convertToJSON = (data) => {\n  try {\n    return data\n  } catch (error) {\n    throw error;\n  }\n  throw new Error('Invalid JSON format')\n}\n\nconst addLessonContent = (data) => {\n  if (data.lesson.content) {\n    try {\n      const parsedContent = JSON.parse(data.lesson.content)\n      if (parsedContent.html) {\n        // New format: has both json and html\n        contentHtml.value = parsedContent.html\n      } else {\n        // Legacy format: just HTML content\n        contentHtml.value = data.lesson.content\n      }\n    } catch (e) {\n      // Not JSON, treat as plain HTML\n      contentHtml.value = data.lesson.content\n    }\n  }\n\n  if (data.lesson.instructor_content) {\n    try {\n      const parsedInstructorContent = JSON.parse(data.lesson.instructor_content)\n      if (parsedInstructorContent.html) {\n        // New format: has both json and html\n        instructorNotesHtml.value = parsedInstructorContent.html\n      } else {\n        // Legacy format: just HTML content\n        instructorNotesHtml.value = data.lesson.instructor_content\n      }\n    } catch (e) {\n      // Not JSON, treat as plain HTML\n      instructorNotesHtml.value = data.lesson.instructor_content\n    }\n  }\n}\n\nconst addInstructorNotes = (data) => {\n  instructorEditor.value.isReady.then(() => {\n    if (data.lesson.instructor_content) {\n      instructorEditor.value.render(JSON.parse(data.lesson.instructor_content))\n    } else if (data.lesson.instructor_notes) {\n      let blocks = convertToJSON(data.lesson)\n      instructorEditor.value.render({\n        blocks: blocks,\n      })\n    }\n  })\n}\n\nconst keyboardShortcut = (e) => {\n  if (\n    e.key === 's' &&\n    (e.ctrlKey || e.metaKey) &&\n    !e.target.classList.contains('ProseMirror')\n  ) {\n    saveLesson({ showSuccessMessage: true })\n    e.preventDefault()\n  }\n}\n\nonBeforeUnmount(() => {\n  window.removeEventListener('keydown', keyboardShortcut)\n  stopRecording()\n})\n\nconst newLessonResource = createResource({\n  url: 'frappe.client.insert',\n  makeParams(values) {\n    return {\n      doc: {\n        doctype: 'Course Lesson',\n        course: props.courseName,\n        chapter: lessonDetails.data?.chapter.name,\n        ...lesson,\n      },\n    }\n  },\n})\n\nconst editLesson = createResource({\n  url: 'frappe.client.set_value',\n  makeParams(values) {\n    return {\n      doctype: 'Course Lesson',\n      name: values.lesson,\n      fieldname: lesson,\n    }\n  },\n})\n\nconst lessonReference = createResource({\n  url: 'frappe.client.insert',\n  makeParams(values) {\n    return {\n      doc: {\n        doctype: 'Lesson Reference',\n        parent: lessonDetails.data?.chapter.name,\n        parenttype: 'Course Chapter',\n        parentfield: 'lessons',\n        lesson: values.lesson,\n        idx: props.lessonNumber,\n      },\n    }\n  },\n})\n\n\n// Function to convert HTML to a simple JSON representation for TipTap\nconst convertHtmlToTipTapJson = (html) => {\n  // This is a simplified conversion - in a real implementation,\n  // you might want to use DOMParser and more sophisticated parsing\n  return {\n    type: 'doc',\n    content: [\n      {\n        type: 'paragraph',\n        content: [\n          {\n            type: 'text',\n            text: html.replace(/<[^>]*>/g, '') // Strip HTML tags for simple text extraction\n          }\n        ]\n      }\n    ]\n  }\n}\n\nconst saveLesson = (e) => {\n  showSuccessMessage = false\n  if (typeof e != 'undefined' && e.showSuccessMessage) {\n    showSuccessMessage = true\n  }\n\n  // Store content in combined format: {json: ..., html: ...}\n  lesson.content = JSON.stringify({\n    json: convertHtmlToTipTapJson(contentHtml.value),\n    html: contentHtml.value\n  })\n\n  // Store instructor content in combined format: {json: ..., html: ...}\n  // Only store if there's actual content\n  if (instructorNotesHtml.value && instructorNotesHtml.value.trim()) {\n    lesson.instructor_content = JSON.stringify({\n      json: convertHtmlToTipTapJson(instructorNotesHtml.value),\n      html: instructorNotesHtml.value\n    })\n  } else {\n    lesson.instructor_content = ''\n  }\n\n  if (lessonDetails.data?.lesson) {\n    editCurrentLesson()\n  } else {\n    createNewLesson()\n  }\n}\n\nconst createNewLesson = () => {\n  newLessonResource.submit(\n    {},\n    {\n      validate() {\n        return validateLesson()\n      },\n      onSuccess(data) {\n        lessonReference.submit(\n          { lesson: data.name },\n          {\n            onSuccess() {\n              if (user.data?.is_system_manager)\n                updateOnboardingStep('create_first_lesson')\n\n              capture('lesson_created')\n              toast.success(__('Lesson created successfully'))\n              lessonDetails.reload()\n            },\n          }\n        )\n      },\n      onError(err) {\n        toast.error(err.messages?.[0] || err)\n      },\n    }\n  )\n}\n\nconst editCurrentLesson = () => {\n  editLesson.submit(\n    {\n      lesson: lessonDetails.data.lesson.name,\n    },\n    {\n      validate() {\n        return validateLesson()\n      },\n      onSuccess() {\n        showSuccessMessage\n          ? toast.success(__('Lesson updated successfully'))\n          : ''\n      },\n      onError(err) {\n        toast.error(err.message)\n      },\n    }\n  )\n}\n\nconst validateLesson = () => {\n  if (!lesson.title) {\n    return 'Title is required'\n  }\n  if (!lesson.content) {\n    return 'Content is required'\n  }\n}\n\nconst breadcrumbs = computed(() => {\n  let crumbs = [\n    {\n      label: 'Courses',\n      route: { name: 'Courses' },\n    },\n    {\n      label: lessonDetails.data?.course_title,\n      route: { name: 'CourseForm', params: { courseName: props.courseName } },\n    },\n  ]\n\n  if (lessonDetails?.data?.lesson) {\n    crumbs.push({\n      label: lessonDetails.data.lesson.title,\n      route: {\n        name: 'Lesson',\n        params: {\n          courseName: props.courseName,\n          chapterNumber: props.chapterNumber,\n          lessonNumber: props.lessonNumber,\n        },\n      },\n    })\n  }\n  crumbs.push({\n    label: lessonDetails?.data?.lesson ? 'Edit Lesson' : 'Create Lesson',\n    route: {\n      name: 'LessonForm',\n      params: {\n        courseName: props.courseName,\n        chapterNumber: props.chapterNumber,\n        lessonNumber: props.lessonNumber,\n      },\n    },\n  })\n  return crumbs\n})\n\nusePageMeta(() => {\n  return {\n    title: lessonDetails?.data?.lesson\n      ? lessonDetails.data.lesson.title\n      : 'New Lesson',\n    icon: brand.favicon,\n  }\n})\n</script>\n"],"names":["_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","show","_useModel","__props","allQuizzes","ref","quiz","reactive","props","addQuiz","getTimeInSeconds","isTimeValid","isFormComplete","timeParts","toast","removeQuiz","selections","unselectAll","selection","index","q","watch","newQuizzes","columns","computed","_createBlock","_unref","Dialog","$event","__","_hoisted_2","_createVNode","FormControl","Link","Button","Plus","_createTextVNode","_hoisted_3","_hoisted_4","_toDisplayString","ListView","ListHeader","_Fragment","_renderList","item","ListHeaderItem","_withCtx","_resolveDynamicComponent","ListRows","row","ListRow","column","ListRowItem","_hoisted_5","formatTimestamp","_hoisted_6","ListSelectBanner","_hoisted_7","Trash2","_hoisted_8","videoRef","videoContainer","playing","currentTime","duration","muted","showQuizModal","showQuiz","showQuizLoader","quizLoadTimer","currentQuiz","nextQuiz","onMounted","updateCurrentTime","updateNextQuiz","resumeVideo","restart","time","timeInSeconds","a","b","nextQuizIndex","fileURL","playVideo","pauseVideo","togglePlay","videoEnded","toggleMute","changeCurrentTime","toggleFullscreen","getQuizMarkerStyle","_ctx","args","Play","Pause","_normalizeStyle","_hoisted_9","formatSeconds","VolumeX","Volume2","Maximize","_component_Quiz","QuizInVideo","_hoisted_10","_hoisted_11","file","VideoBlock","showExplanation","type","title","contentMap","openHelpDialog","contentType","key","Info","ExplanationVideos","showSettings","tmp","selectValue","newVal","attrs","languages","l","saveSettings","open","lang","tabState","codeInput","codeOutput","isRunning","showOutput","isError","isEditorMode","copyCode","codeText","err","runCode","language","result","executeCode","error","clearOutput","code","response","errors","output","handleRunCode","NodeViewWrapper","Copy","node","Loader","Settings","NodeViewContent","X","_normalizeClass","Tabs","tab","CodeBlockPlugin","CodeBlockLowlight","el","VueNodeViewRenderer","CodeBlockComponent","lowlight","createLowlight","common","contentHtml","instructorNotesHtml","contentExtensions","brand","sessionStore","user","inject","openInstructorEditor","updateOnboardingStep","useOnboarding","showSuccessMessage","capture","enablePlyr","lesson","lessonDetails","createResource","data","addLessonContent","parsedContent","parsedInstructorContent","keyboardShortcut","e","saveLesson","onBeforeUnmount","newLessonResource","values","editLesson","lessonReference","convertHtmlToTipTapJson","html","editCurrentLesson","createNewLesson","validateLesson","breadcrumbs","crumbs","usePageMeta","Breadcrumbs","ChevronRight","TextEditor","val","_hoisted_12","_hoisted_13","_hoisted_14","LessonHelp"],"mappings":"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"}