import"@headlessui/vue";import{r as u,s as M,i as f,z as w,o as D,A as S,a as _,b as $,u as j,e as m,f as n,g as a,h as Y,l as s,t as i,j as B,k as L,F as E}from"./index-BIerRe8o.js";import{_ as R}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-Cdx-1Hlv.js";import"@tiptap/extension-code-block-lowlight";import"@tiptap/extension-placeholder";import"@tiptap/extension-table";import"@tiptap/extension-table-cell";import"@tiptap/extension-table-header";import"@tiptap/extension-table-row";import"@tiptap/extension-text-align";import"@tiptap/extension-text-style";import"@tiptap/extension-typography";import"@tiptap/vue-3";import"@tiptap/extension-mention";import"@vueuse/core";import{_ as V}from"./UpcomingEvaluations-QmuxSdsA.js";import"@tiptap/core";import"@tiptap/extension-code-block";import"@tiptap/extension-heading";import"@tiptap/suggestion";import"@tiptap/extension-link";const z={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},F={class:"p-5"},I={key:0},O={class:"text-lg text-ink-gray-9 font-semibold mb-1"},q={class:"text-ink-gray-9 text-sm"},A={class:"text-ink-gray-9 font-semibold"},P={class:"text-sm text-ink-gray-7 font-medium"},T={key:1},de={__name:"CourseCertification",props:{courseName:{type:String,required:!0}},setup(v){const o=u(null),p=u(null),{brand:h}=M(),c=u([]),l=f("$user"),y=f("$dayjs"),b=w(),t=v;D(()=>{g(),C()});const r=S({url:"frappe.client.get_value",params:{doctype:"LMS Certificate",filters:{member:l.data?.name,course:t.courseName},fieldname:["name","template","issue_date"]},cache:[l.data?.name,t.courseName]}),g=()=>{_("frappe.client.get_value",{doctype:"LMS Enrollment",filters:{member:l.data?.name,course:t.courseName},fieldname:["purchased_certificate"]}).then(e=>{e.purchased_certificate?r.reload():b.push({name:"CourseDetail",params:{courseName:t.courseName}})})},C=()=>{_("frappe.client.get_value",{doctype:"LMS Course",filters:{name:t.courseName},fieldname:["title","evaluator"]}).then(e=>{o.value=e.title,p.value=e.evaluator,k()})},k=()=>{c.value=[{course:t.courseName,title:o.value,evaluator:p.value}]},N=e=>{window.open(`/api/method/frappe.utils.print_format.download_pdf?doctype=LMS+Certificate&name=${e.name}&format=${encodeURIComponent(e.template)}`,"_blank")},x=$(()=>[{label:__("Courses"),route:{name:"Courses"}},{label:o.value,route:{name:"CourseDetail",params:{courseName:t.courseName}}},{label:__("Certification")}]);return j(()=>({title:o.value,icon:h.favicon})),(e,d)=>(n(),m(E,null,[a("header",z,[Y(s(R),{class:"h-7",items:x.value},null,8,["items"])]),a("div",F,[s(r).data&&Object.keys(s(r).data).length?(n(),m("div",I,[a("div",O,i(e.__("Certification")),1),a("div",q,i(e.__("You are already certified for this course. Click on the card below to open your certificate.")),1),a("div",{class:"border p-3 w-fit min-w-60 rounded-md space-y-2 hover:bg-surface-gray-1 cursor-pointer mt-5",onClick:d[0]||(d[0]=U=>N(s(r).data))},[a("div",A,i(o.value),1),a("div",P,i(e.__("Issued On"))+": "+i(s(y)(s(r).data.issue_date).format("DD MMM YYYY")),1)])])):(n(),m("div",T,[c.value.length?(n(),B(V,{key:0,courses:c.value},null,8,["courses"])):L("",!0)]))])],64))}};export{de as default};
//# sourceMappingURL=CourseCertification-D7s7GZUs.js.map
