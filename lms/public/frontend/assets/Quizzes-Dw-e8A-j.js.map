{"version":3,"file":"Quizzes-Dw-e8A-j.js","sources":["../../../../frontend-monorepo/website/src/pages/Quizzes.vue"],"sourcesContent":["<template>\n\t<header\n\t\tclass=\"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5\"\n\t>\n\t\t<Breadcrumbs :items=\"breadcrumbs\" />\n\t\t<router-link\n\t\t\tv-if=\"!readOnlyMode\"\n\t\t\t:to=\"{\n\t\t\t\tname: 'QuizForm',\n\t\t\t\tparams: {\n\t\t\t\t\tquizID: 'new',\n\t\t\t\t},\n\t\t\t}\"\n\t\t>\n\t\t\t<Button variant=\"solid\">\n\t\t\t\t<template #prefix>\n\t\t\t\t\t<Plus class=\"w-4 h-4\" />\n\t\t\t\t</template>\n\t\t\t\t{{ __('New Quiz') }}\n\t\t\t</Button>\n\t\t</router-link>\n\t</header>\n\t<div v-if=\"quizzes.data?.length\" class=\"md:w-3/4 md:mx-auto py-5 mx-5\">\n\t\t<div v-if=\"quizCount\" class=\"text-xl font-semibold text-ink-gray-7 mb-4\">\n\t\t\t{{ __('{0} Quizzes').format(quizCount) }}\n\t\t</div>\n\t\t<ListView\n\t\t\t:columns=\"quizColumns\"\n\t\t\t:rows=\"quizzes.data\"\n\t\t\trow-key=\"name\"\n\t\t\t:options=\"{ showTooltip: false, selectable: false }\"\n\t\t>\n\t\t\t<ListHeader\n\t\t\t\tclass=\"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2\"\n\t\t\t>\n\t\t\t\t<ListHeaderItem :item=\"item\" v-for=\"item in quizColumns\">\n\t\t\t\t</ListHeaderItem>\n\t\t\t</ListHeader>\n\t\t\t<ListRows>\n\t\t\t\t<router-link\n\t\t\t\t\tv-for=\"row in quizzes.data\"\n\t\t\t\t\t:to=\"{\n\t\t\t\t\t\tname: 'QuizForm',\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tquizID: row.name,\n\t\t\t\t\t\t},\n\t\t\t\t\t}\"\n\t\t\t\t>\n\t\t\t\t\t<ListRow :row=\"row\" />\n\t\t\t\t</router-link>\n\t\t\t</ListRows>\n\t\t</ListView>\n\t\t<div class=\"flex justify-center my-5\">\n\t\t\t<Button v-if=\"quizzes.hasNextPage\" @click=\"quizzes.next()\">\n\t\t\t\t{{ __('Load More') }}\n\t\t\t</Button>\n\t\t</div>\n\t</div>\n\t<EmptyState v-else type=\"Quizzes\" />\n</template>\n<script setup>\nimport {\n\tBreadcrumbs,\n\tButton,\n\tcall,\n\tcreateListResource,\n\tListView,\n\tListRows,\n\tListRow,\n\tListHeader,\n\tListHeaderItem,\n\tusePageMeta,\n} from '@mono/mono-frappe-ui'\nimport { useRouter } from 'vue-router'\nimport { computed, inject, onMounted, ref } from 'vue'\nimport { Plus } from 'lucide-vue-next'\nimport { sessionStore } from '@/stores/session'\nimport EmptyState from '@/components/EmptyState.vue'\n\nconst { brand } = sessionStore()\nconst user = inject('$user')\nconst router = useRouter()\nconst quizCount = ref(0)\nconst readOnlyMode = window.read_only_mode\n\nonMounted(() => {\n\tif (!user.data?.is_moderator && !user.data?.is_instructor) {\n\t\trouter.push({ name: 'Courses' })\n\t}\n\tgetQuizCount()\n})\n\nconst quizFilter = computed(() => {\n\tif (user.data?.is_moderator) return {}\n\treturn {\n\t\towner: user.data?.name,\n\t}\n})\n\nconst quizzes = createListResource({\n\tdoctype: 'LMS Quiz',\n\tfilters: quizFilter,\n\tfields: ['name', 'title', 'passing_percentage', 'total_marks'],\n\tauto: true,\n\tcache: ['quizzes', user.data?.name],\n\torderBy: 'modified desc',\n})\n\nconst getQuizCount = () => {\n\tcall('frappe.client.get_count', {\n\t\tdoctype: 'LMS Quiz',\n\t}).then((data) => {\n\t\tquizCount.value = data\n\t})\n}\n\nconst quizColumns = computed(() => {\n\treturn [\n\t\t{\n\t\t\tlabel: __('Title'),\n\t\t\tkey: 'title',\n\t\t\twidth: 2,\n\t\t},\n\t\t{\n\t\t\tlabel: __('Total Marks'),\n\t\t\tkey: 'total_marks',\n\t\t\twidth: 1,\n\t\t\talign: 'center',\n\t\t},\n\t\t{\n\t\t\tlabel: __('Passing Percentage'),\n\t\t\tkey: 'passing_percentage',\n\t\t\twidth: 1,\n\t\t\talign: 'center',\n\t\t},\n\t]\n})\n\nconst breadcrumbs = computed(() => {\n\treturn [\n\t\t{\n\t\t\tlabel: __('Quizzes'),\n\t\t\troute: {\n\t\t\t\tname: 'Quizzes',\n\t\t\t},\n\t\t},\n\t]\n})\n\nusePageMeta(() => {\n\treturn {\n\t\ttitle: __('Quizzes'),\n\t\ticon: brand.favicon,\n\t}\n})\n</script>\n"],"names":["brand","sessionStore","user","inject","router","useRouter","quizCount","ref","readOnlyMode","onMounted","getQuizCount","quizFilter","computed","quizzes","createListResource","call","data","quizColumns","breadcrumbs","usePageMeta","_createElementVNode","_hoisted_1","_createVNode","_unref","Breadcrumbs","_createBlock","_component_router_link","Button","Plus","_createTextVNode","__","_openBlock","_createElementBlock","_hoisted_2","_hoisted_3","_toDisplayString","ListView","ListHeader","_Fragment","_renderList","item","ListHeaderItem","ListRows","row","ListRow","_hoisted_4","_cache","$event","EmptyState"],"mappings":"krBA+EA,KAAM,CAAE,MAAAA,CAAK,EAAKC,EAAY,EACxBC,EAAOC,EAAO,OAAO,EACrBC,EAASC,EAAS,EAClBC,EAAYC,EAAI,CAAC,EACjBC,EAAe,OAAO,eAE5BC,EAAU,IAAM,CACX,CAACP,EAAK,MAAM,cAAgB,CAACA,EAAK,MAAM,eAC3CE,EAAO,KAAK,CAAE,KAAM,SAAS,CAAE,EAEhCM,EAAY,CACb,CAAC,EAED,MAAMC,EAAaC,EAAS,IACvBV,EAAK,MAAM,aAAqB,CAAA,EAC7B,CACN,MAAOA,EAAK,MAAM,IACpB,CACC,EAEKW,EAAUC,EAAmB,CAClC,QAAS,WACT,QAASH,EACT,OAAQ,CAAC,OAAQ,QAAS,qBAAsB,aAAa,EAC7D,KAAM,GACN,MAAO,CAAC,UAAWT,EAAK,MAAM,IAAI,EAClC,QAAS,eACV,CAAC,EAEKQ,EAAe,IAAM,CAC1BK,EAAK,0BAA2B,CAC/B,QAAS,UACX,CAAE,EAAE,KAAMC,GAAS,CACjBV,EAAU,MAAQU,CACpB,CAAE,CACF,EAEMC,EAAcL,EAAS,IACrB,CACN,CACC,MAAO,GAAG,OAAO,EACjB,IAAK,QACL,MAAO,CACV,EACE,CACC,MAAO,GAAG,aAAa,EACvB,IAAK,cACL,MAAO,EACP,MAAO,QACV,EACE,CACC,MAAO,GAAG,oBAAoB,EAC9B,IAAK,qBACL,MAAO,EACP,MAAO,QACV,CACA,CACC,EAEKM,EAAcN,EAAS,IACrB,CACN,CACC,MAAO,GAAG,SAAS,EACnB,MAAO,CACN,KAAM,SACV,CACA,CACA,CACC,EAED,OAAAO,EAAY,KACJ,CACN,MAAO,GAAG,SAAS,EACnB,KAAMnB,EAAM,OACd,EACC,wDAzJAoB,EAoBS,SApBTC,EAoBS,CAjBRC,EAAoCC,EAAAC,CAAA,EAAA,CAAtB,MAAON,EAAA,KAAW,EAAA,KAAA,EAAA,CAAA,OAAA,CAAA,EAExBK,EAAAf,CAAA,gBADRiB,EAecC,EAAA,OAbZ,GAAI,sCAKJ,cAED,IAKS,CALTJ,EAKSC,EAAAI,CAAA,EAAA,CALD,QAAQ,OAAO,EAAA,CACX,SACV,IAAwB,CAAxBL,EAAwBC,EAAAK,CAAA,EAAA,CAAlB,MAAM,SAAS,CAAA,cACX,IACX,CADWC,EAAA,MACRC,EAAAA,GAAE,UAAA,CAAA,EAAA,CAAA,qBAIGP,EAAAV,CAAA,EAAQ,MAAM,QAAzBkB,IAAAC,EAmCM,MAnCNC,EAmCM,CAlCM3B,EAAA,OAAXyB,EAAA,EAAAC,EAEM,MAFNE,EAEMC,EADFL,KAAE,aAAA,EAAgB,OAAOxB,EAAA,KAAS,CAAA,EAAA,CAAA,YAEtCgB,EAyBWC,EAAAa,CAAA,EAAA,CAxBT,QAASnB,EAAA,MACT,KAAMM,EAAAV,CAAA,EAAQ,KACf,UAAQ,OACP,QAAS,CAAA,YAAA,GAAA,WAAA,EAAA,cAEV,IAKa,CALbS,EAKaC,EAAAc,CAAA,EAAA,CAJZ,MAAM,gEAAgE,EAAA,WAEzC,IAA2B,QAAxDL,EACiBM,EAAA,KAAAC,EAD2BtB,EAAA,MAARuB,QAApCf,EACiBF,EAAAkB,CAAA,EAAA,CADA,KAAMD,CAAI,EAAA,KAAA,EAAA,CAAA,MAAA,CAAA,kBAG5BlB,EAYWC,EAAAmB,CAAA,EAAA,KAAA,WAVT,IAA2B,EAD5BX,EAAA,EAAA,EAAAC,EAUcM,EAAA,KAAAC,EATChB,EAAAV,CAAA,EAAQ,KAAf8B,QADRlB,EAUcC,EAAA,CARZ,GAAE,yBAA2D,OAAAiB,EAAI,mBAOlE,IAAsB,CAAtBrB,EAAsBC,EAAAqB,CAAA,EAAA,CAAZ,IAAKD,CAAG,EAAA,KAAA,EAAA,CAAA,KAAA,CAAA,mEAIrBvB,EAIM,MAJNyB,EAIM,CAHStB,EAAAV,CAAA,EAAQ,iBAAtBY,EAESF,EAAAI,CAAA,EAAA,OAF2B,QAAKmB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAExB,EAAAV,CAAA,EAAQ,KAAI,eACtD,IAAqB,KAAlBiB,EAAAA,GAAE,WAAA,CAAA,EAAA,CAAA,8BAIRL,EAAoCuB,EAAA,OAAjB,KAAK"}