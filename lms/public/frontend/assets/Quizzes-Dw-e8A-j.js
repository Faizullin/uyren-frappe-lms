import{s as q,i as M,z as N,r as P,o as j,b as _,c as B,a as F,u as L,d as S,e as u,f as t,g,j as l,h as s,k as m,l as e,n as a,_ as k,p as h,t as d,P as T,ag as V,F as f,x as w,ah as D,aj as I,ak as R,ao as E}from"./index-DiXMRYjh.js";import{_ as O}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-cdEqS9iC.js";import{_ as A}from"./EmptyState.vue_vue_type_script_setup_true_lang-Ci78_lkp.js";const G={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},H={key:0,class:"md:w-3/4 md:mx-auto py-5 mx-5"},J={key:0,class:"text-xl font-semibold text-ink-gray-7 mb-4"},K={class:"flex justify-center my-5"},Z={__name:"Quizzes",setup(U){const{brand:b}=q(),n=M("$user"),x=N(),c=P(0),v=window.read_only_mode;j(()=>{!n.data?.is_moderator&&!n.data?.is_instructor&&x.push({name:"Courses"}),$()});const Q=_(()=>n.data?.is_moderator?{}:{owner:n.data?.name}),r=B({doctype:"LMS Quiz",filters:Q,fields:["name","title","passing_percentage","total_marks"],auto:!0,cache:["quizzes",n.data?.name],orderBy:"modified desc"}),$=()=>{F("frappe.client.get_count",{doctype:"LMS Quiz"}).then(o=>{c.value=o})},p=_(()=>[{label:__("Title"),key:"title",width:2},{label:__("Total Marks"),key:"total_marks",width:1,align:"center"},{label:__("Passing Percentage"),key:"passing_percentage",width:1,align:"center"}]),C=_(()=>[{label:__("Quizzes"),route:{name:"Quizzes"}}]);return L(()=>({title:__("Quizzes"),icon:b.favicon})),(o,z)=>{const y=S("router-link");return t(),u(f,null,[g("header",G,[s(e(O),{items:C.value},null,8,["items"]),e(v)?m("",!0):(t(),l(y,{key:0,to:{name:"QuizForm",params:{quizID:"new"}}},{default:a(()=>[s(e(k),{variant:"solid"},{prefix:a(()=>[s(e(T),{class:"w-4 h-4"})]),default:a(()=>[h(" "+d(o.__("New Quiz")),1)]),_:1})]),_:1}))]),e(r).data?.length?(t(),u("div",H,[c.value?(t(),u("div",J,d(o.__("{0} Quizzes").format(c.value)),1)):m("",!0),s(e(E),{columns:p.value,rows:e(r).data,"row-key":"name",options:{showTooltip:!1,selectable:!1}},{default:a(()=>[s(e(V),{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2"},{default:a(()=>[(t(!0),u(f,null,w(p.value,i=>(t(),l(e(D),{item:i},null,8,["item"]))),256))]),_:1}),s(e(I),null,{default:a(()=>[(t(!0),u(f,null,w(e(r).data,i=>(t(),l(y,{to:{name:"QuizForm",params:{quizID:i.name}}},{default:a(()=>[s(e(R),{row:i},null,8,["row"])]),_:2},1032,["to"]))),256))]),_:1})]),_:1},8,["columns","rows"]),g("div",K,[e(r).hasNextPage?(t(),l(e(k),{key:0,onClick:z[0]||(z[0]=i=>e(r).next())},{default:a(()=>[h(d(o.__("Load More")),1)]),_:1})):m("",!0)])])):(t(),l(A,{key:1,type:"Quizzes"}))],64)}}};export{Z as default};
//# sourceMappingURL=Quizzes-Dw-e8A-j.js.map
