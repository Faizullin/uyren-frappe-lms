import{B as q,i as M,u as B,g as N,n as P,z as _,C as F,l as L,a as D,r as S,c as u,o as t,d as g,E as l,b as s,h as m,p as e,w as a,H as k,e as w,t as d,P as T,av as V,F as f,f as b,aw as j,ay as E,az as I,aD as R}from"./index-RevCnO16.js";import{_ as H}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-CeasAM64.js";import{_ as O}from"./EmptyState.vue_vue_type_script_setup_true_lang-6vpbuXAr.js";const A={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},G={key:0,class:"md:w-3/4 md:mx-auto py-5 mx-5"},J={key:0,class:"text-xl font-semibold text-ink-gray-7 mb-4"},K={class:"flex justify-center my-5"},Z={__name:"Quizzes",setup(U){const{brand:h}=q(),n=M("$user"),v=B(),c=N(0),x=window.read_only_mode;P(()=>{!n.data?.is_moderator&&!n.data?.is_instructor&&v.push({name:"Courses"}),$()});const Q=_(()=>n.data?.is_moderator?{}:{owner:n.data?.name}),r=F({doctype:"LMS Quiz",filters:Q,fields:["name","title","passing_percentage","total_marks"],auto:!0,cache:["quizzes",n.data?.name],orderBy:"modified desc"}),$=()=>{L("frappe.client.get_count",{doctype:"LMS Quiz"}).then(o=>{c.value=o})},p=_(()=>[{label:__("Title"),key:"title",width:2},{label:__("Total Marks"),key:"total_marks",width:1,align:"center"},{label:__("Passing Percentage"),key:"passing_percentage",width:1,align:"center"}]),C=_(()=>[{label:__("Quizzes"),route:{name:"Quizzes"}}]);return D(()=>({title:__("Quizzes"),icon:h.favicon})),(o,z)=>{const y=S("router-link");return t(),u(f,null,[g("header",A,[s(e(H),{items:C.value},null,8,["items"]),e(x)?m("",!0):(t(),l(y,{key:0,to:{name:"QuizForm",params:{quizID:"new"}}},{default:a(()=>[s(e(k),{variant:"solid"},{prefix:a(()=>[s(e(T),{class:"w-4 h-4"})]),default:a(()=>[w(" "+d(o.__("New Quiz")),1)]),_:1})]),_:1}))]),e(r).data?.length?(t(),u("div",G,[c.value?(t(),u("div",J,d(o.__("{0} Quizzes").format(c.value)),1)):m("",!0),s(e(R),{columns:p.value,rows:e(r).data,"row-key":"name",options:{showTooltip:!1,selectable:!1}},{default:a(()=>[s(e(V),{class:"mb-2 grid items-center space-x-4 rounded bg-surface-gray-2 p-2"},{default:a(()=>[(t(!0),u(f,null,b(p.value,i=>(t(),l(e(j),{item:i},null,8,["item"]))),256))]),_:1}),s(e(E),null,{default:a(()=>[(t(!0),u(f,null,b(e(r).data,i=>(t(),l(y,{to:{name:"QuizForm",params:{quizID:i.name}}},{default:a(()=>[s(e(I),{row:i},null,8,["row"])]),_:2},1032,["to"]))),256))]),_:1})]),_:1},8,["columns","rows"]),g("div",K,[e(r).hasNextPage?(t(),l(e(k),{key:0,onClick:z[0]||(z[0]=i=>e(r).next())},{default:a(()=>[w(d(o.__("Load More")),1)]),_:1})):m("",!0)])])):(t(),l(O,{key:1,type:"Quizzes"}))],64)}}};export{Z as default};
//# sourceMappingURL=Quizzes-21HxhUu7.js.map
