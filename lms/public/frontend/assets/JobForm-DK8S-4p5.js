import{i as L,u as z,x as I,I as d,T as M,y as R,q as c,a as A,c as v,o as u,d as s,b as n,s as t,w as _,e as b,t as i,D as V,E as r,B as k,h as W,ak as X,bs as G,bt as H,bu as K,bv as Q,aL as Y,N as w}from"./index-CgbsATbs.js";import{_ as Z}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-KbxUUXyD.js";const ee={class:""},oe={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},ae={class:"py-5"},se={class:"container border-b mb-4 pb-5"},le={class:"text-lg font-semibold mb-4"},te={class:"grid grid-cols-2 gap-5"},ne={class:"space-y-4"},ie={class:"space-y-4"},re={class:"container border-b mb-4 pb-5"},me={class:"text-lg font-semibold mb-4"},de={class:"grid grid-cols-2 gap-5"},ue={class:"block text-ink-gray-5 text-xs mb-1 mt-4"},be={class:"mb-4"},pe={key:1,class:""},ce={class:"flex items-center"},_e={class:"border rounded-md p-2 mr-2"},ye={class:"flex flex-col"},ge={class:"text-sm text-ink-gray-4 mt-1"},fe={class:"container mt-4"},ve={class:"block text-ink-gray-5 text-xs mb-1"},we={__name:"JobForm",props:{jobName:{type:String,default:"new"}},setup(y){const j=L("$user"),g=z(),{brand:C}=I(),m=y,J=d({url:"frappe.client.insert",makeParams(e){return{doc:{doctype:"Job Opportunity",company_logo:a.image?.file_url,...a}}}}),x=d({url:"frappe.client.set_value",makeParams(e){return{doctype:"Job Opportunity",name:m.jobName,fieldname:{company_logo:a.image.file_url,...a}}}}),p=d({url:"frappe.client.get",makeParams(e){return{doctype:"Job Opportunity",name:m.jobName}},onSuccess(e){Object.keys(e).forEach(o=>{Object.hasOwn(a,o)&&(a[o]=e[o])}),e.company_logo&&N.reload({image:e.company_logo})}}),N=d({url:"lms.lms.api.get_file_info",makeParams(e){return{file_url:e.image}},auto:!1,onSuccess(e){a.image=e}}),a=M({job_title:"",location:"",country:"",type:"Full Time",status:"Open",company_name:"",company_website:"",image:null,description:"",company_email_address:""});R(()=>{j.data||(window.location.href="/login"),m.jobName!="new"&&p.reload()});const F=()=>{p.data?T():S()},S=()=>{J.submit({},{onSuccess(e){g.push({name:"JobDetail",params:{job:e.name}})},onError(e){w.error(e.messages?.[0]||e)}})},T=()=>{x.submit({},{onSuccess(e){g.push({name:"JobDetail",params:{job:e.name}})},onError(e){w.error(e.messages?.[0]||e)}})},U=e=>{a.image=e},O=()=>{a.image=null},q=e=>{let o=e.name.split(".").pop().toLowerCase();if(!["jpg","jpeg","png"].includes(o))return"Only image file is allowed."},D=c(()=>[{label:"Full Time",value:"Full Time"},{label:"Part Time",value:"Part Time"},{label:"Contract",value:"Contract"},{label:"Freelance",value:"Freelance"}]),$=c(()=>[{label:"Open",value:"Open"},{label:"Closed",value:"Closed"}]),E=c(()=>[{label:"Jobs",route:{name:"Jobs"}},{label:m.jobName=="new"?"New Job":"Edit Job",route:{name:"JobForm"}}]);return A(()=>({title:m.jobName=="new"?"New Job":p.data?.title,icon:C.favicon})),(e,o)=>{const P=X;return u(),v("div",ee,[s("header",oe,[n(t(Z),{items:E.value},null,8,["items"]),n(t(V),{variant:"solid",onClick:o[0]||(o[0]=l=>F())},{default:_(()=>[b(i(e.__("Save")),1)]),_:1})]),s("div",ae,[s("div",se,[s("div",le,i(e.__("Job Details")),1),s("div",te,[s("div",ne,[n(t(r),{modelValue:a.job_title,"onUpdate:modelValue":o[1]||(o[1]=l=>a.job_title=l),label:e.__("Title"),required:!0},null,8,["modelValue","label"]),n(t(r),{modelValue:a.type,"onUpdate:modelValue":o[2]||(o[2]=l=>a.type=l),label:e.__("Type"),type:"select",options:D.value,required:!0},null,8,["modelValue","label","options"])]),s("div",ie,[n(t(r),{modelValue:a.location,"onUpdate:modelValue":o[3]||(o[3]=l=>a.location=l),label:e.__("City"),required:!0},null,8,["modelValue","label"]),n(P,{modelValue:a.country,"onUpdate:modelValue":o[4]||(o[4]=l=>a.country=l),doctype:"Country",label:e.__("Country"),required:!0},null,8,["modelValue","label"]),y.jobName!="new"?(u(),k(t(r),{key:0,modelValue:a.status,"onUpdate:modelValue":o[5]||(o[5]=l=>a.status=l),label:e.__("Status"),type:"select",options:$.value,required:!0},null,8,["modelValue","label","options"])):W("",!0)])])]),s("div",re,[s("div",me,i(e.__("Company Details")),1),s("div",de,[s("div",null,[n(t(r),{modelValue:a.company_name,"onUpdate:modelValue":o[6]||(o[6]=l=>a.company_name=l),label:e.__("Company Name"),class:"mb-4",required:!0},null,8,["modelValue","label"]),n(t(r),{modelValue:a.company_website,"onUpdate:modelValue":o[7]||(o[7]=l=>a.company_website=l),label:e.__("Company Website"),required:!0},null,8,["modelValue","label"])]),s("div",null,[n(t(r),{modelValue:a.company_email_address,"onUpdate:modelValue":o[8]||(o[8]=l=>a.company_email_address=l),label:e.__("Company Email Address"),class:"mb-4",required:!0},null,8,["modelValue","label"]),s("label",ue,[b(i(e.__("Company Logo"))+" ",1),o[12]||(o[12]=s("span",{class:"text-ink-red-3"},"*",-1))]),a.image?(u(),v("div",pe,[s("div",ce,[s("div",_e,[n(t(H),{class:"h-5 w-5 stroke-1.5 text-ink-gray-7"})]),s("div",ye,[s("span",null,i(a.image.file_name),1),s("span",ge,i(t(K)(a.image.file_size)),1)]),n(t(Q),{onClick:o[10]||(o[10]=l=>O()),class:"bg-surface-gray-3 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})])])):(u(),k(t(G),{key:0,fileTypes:["image/*"],validateFile:q,onSuccess:o[9]||(o[9]=l=>U(l))},{default:_(({file:l,progress:h,uploading:f,openFileSelector:B})=>[s("div",be,[n(t(V),{onClick:B,loading:f},{default:_(()=>[b(i(f?`Uploading ${h}%`:"Upload an image"),1)]),_:2},1032,["onClick","loading"])])]),_:1}))])])]),s("div",fe,[s("label",ve,[b(i(e.__("Description"))+" ",1),o[13]||(o[13]=s("span",{class:"text-ink-red-3"},"*",-1))]),n(t(Y),{content:a.description,onChange:o[11]||(o[11]=l=>a.description=l),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem] mb-4"},null,8,["content"])])])])}}};export{we as default};
//# sourceMappingURL=JobForm-DK8S-4p5.js.map
