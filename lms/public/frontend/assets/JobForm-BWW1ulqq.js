import{i as B,z as L,s as M,A as d,L as R,o as A,b as c,u as I,e as v,f as u,g as t,h as n,l as s,n as _,p,t as i,_ as V,q as r,j as k,k as G,af as H,bk as W,bl as X,bm as K,bn as Q,aG as Y,H as j}from"./index-BIerRe8o.js";import"@headlessui/vue";import{_ as Z}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-Cdx-1Hlv.js";import"@tiptap/vue-3";import"@vueuse/core";import"@tiptap/extension-code-block-lowlight";import"@tiptap/extension-placeholder";import"@tiptap/extension-table";import"@tiptap/extension-table-cell";import"@tiptap/extension-table-header";import"@tiptap/extension-table-row";import"@tiptap/extension-text-align";import"@tiptap/extension-text-style";import"@tiptap/extension-typography";import"@tiptap/core";import"@tiptap/extension-code-block";import"@tiptap/extension-heading";import"@tiptap/suggestion";import"@tiptap/extension-link";import"@tiptap/extension-mention";const ee={class:""},oe={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},ae={class:"py-5"},te={class:"container border-b mb-4 pb-5"},le={class:"text-lg font-semibold mb-4"},se={class:"grid grid-cols-2 gap-5"},ne={class:"space-y-4"},ie={class:"space-y-4"},re={class:"container border-b mb-4 pb-5"},me={class:"text-lg font-semibold mb-4"},de={class:"grid grid-cols-2 gap-5"},ue={class:"block text-ink-gray-5 text-xs mb-1 mt-4"},pe={class:"mb-4"},be={key:1,class:""},ce={class:"flex items-center"},_e={class:"border rounded-md p-2 mr-2"},ye={class:"flex flex-col"},ge={class:"text-sm text-ink-gray-4 mt-1"},fe={class:"container mt-4"},ve={class:"block text-ink-gray-5 text-xs mb-1"},Be={__name:"JobForm",props:{jobName:{type:String,default:"new"}},setup(y){const w=B("$user"),g=L(),{brand:C}=M(),m=y,J=d({url:"frappe.client.insert",makeParams(e){return{doc:{doctype:"Job Opportunity",company_logo:a.image?.file_url,...a}}}}),x=d({url:"frappe.client.set_value",makeParams(e){return{doctype:"Job Opportunity",name:m.jobName,fieldname:{company_logo:a.image.file_url,...a}}}}),b=d({url:"frappe.client.get",makeParams(e){return{doctype:"Job Opportunity",name:m.jobName}},onSuccess(e){Object.keys(e).forEach(o=>{Object.hasOwn(a,o)&&(a[o]=e[o])}),e.company_logo&&N.reload({image:e.company_logo})}}),N=d({url:"lms.lms.api.get_file_info",makeParams(e){return{file_url:e.image}},auto:!1,onSuccess(e){a.image=e}}),a=R({job_title:"",location:"",country:"",type:"Full Time",status:"Open",company_name:"",company_website:"",image:null,description:"",company_email_address:""});A(()=>{w.data||(window.location.href="/login"),m.jobName!="new"&&b.reload()});const F=()=>{b.data?T():S()},S=()=>{J.submit({},{onSuccess(e){g.push({name:"JobDetail",params:{job:e.name}})},onError(e){j.error(e.messages?.[0]||e)}})},T=()=>{x.submit({},{onSuccess(e){g.push({name:"JobDetail",params:{job:e.name}})},onError(e){j.error(e.messages?.[0]||e)}})},U=e=>{a.image=e},O=()=>{a.image=null},q=e=>{let o=e.name.split(".").pop().toLowerCase();if(!["jpg","jpeg","png"].includes(o))return"Only image file is allowed."},$=c(()=>[{label:"Full Time",value:"Full Time"},{label:"Part Time",value:"Part Time"},{label:"Contract",value:"Contract"},{label:"Freelance",value:"Freelance"}]),D=c(()=>[{label:"Open",value:"Open"},{label:"Closed",value:"Closed"}]),P=c(()=>[{label:"Jobs",route:{name:"Jobs"}},{label:m.jobName=="new"?"New Job":"Edit Job",route:{name:"JobForm"}}]);return I(()=>({title:m.jobName=="new"?"New Job":b.data?.title,icon:C.favicon})),(e,o)=>{const h=H;return u(),v("div",ee,[t("header",oe,[n(s(Z),{items:P.value},null,8,["items"]),n(s(V),{variant:"solid",onClick:o[0]||(o[0]=l=>F())},{default:_(()=>[p(i(e.__("Save")),1)]),_:1})]),t("div",ae,[t("div",te,[t("div",le,i(e.__("Job Details")),1),t("div",se,[t("div",ne,[n(s(r),{modelValue:a.job_title,"onUpdate:modelValue":o[1]||(o[1]=l=>a.job_title=l),label:e.__("Title"),required:!0},null,8,["modelValue","label"]),n(s(r),{modelValue:a.type,"onUpdate:modelValue":o[2]||(o[2]=l=>a.type=l),label:e.__("Type"),type:"select",options:$.value,required:!0},null,8,["modelValue","label","options"])]),t("div",ie,[n(s(r),{modelValue:a.location,"onUpdate:modelValue":o[3]||(o[3]=l=>a.location=l),label:e.__("City"),required:!0},null,8,["modelValue","label"]),n(h,{modelValue:a.country,"onUpdate:modelValue":o[4]||(o[4]=l=>a.country=l),doctype:"Country",label:e.__("Country"),required:!0},null,8,["modelValue","label"]),y.jobName!="new"?(u(),k(s(r),{key:0,modelValue:a.status,"onUpdate:modelValue":o[5]||(o[5]=l=>a.status=l),label:e.__("Status"),type:"select",options:D.value,required:!0},null,8,["modelValue","label","options"])):G("",!0)])])]),t("div",re,[t("div",me,i(e.__("Company Details")),1),t("div",de,[t("div",null,[n(s(r),{modelValue:a.company_name,"onUpdate:modelValue":o[6]||(o[6]=l=>a.company_name=l),label:e.__("Company Name"),class:"mb-4",required:!0},null,8,["modelValue","label"]),n(s(r),{modelValue:a.company_website,"onUpdate:modelValue":o[7]||(o[7]=l=>a.company_website=l),label:e.__("Company Website"),required:!0},null,8,["modelValue","label"])]),t("div",null,[n(s(r),{modelValue:a.company_email_address,"onUpdate:modelValue":o[8]||(o[8]=l=>a.company_email_address=l),label:e.__("Company Email Address"),class:"mb-4",required:!0},null,8,["modelValue","label"]),t("label",ue,[p(i(e.__("Company Logo"))+" ",1),o[12]||(o[12]=t("span",{class:"text-ink-red-3"},"*",-1))]),a.image?(u(),v("div",be,[t("div",ce,[t("div",_e,[n(s(X),{class:"h-5 w-5 stroke-1.5 text-ink-gray-7"})]),t("div",ye,[t("span",null,i(a.image.file_name),1),t("span",ge,i(s(K)(a.image.file_size)),1)]),n(s(Q),{onClick:o[10]||(o[10]=l=>O()),class:"bg-surface-gray-3 rounded-md cursor-pointer stroke-1.5 w-5 h-5 p-1 ml-4"})])])):(u(),k(s(W),{key:0,fileTypes:["image/*"],validateFile:q,onSuccess:o[9]||(o[9]=l=>U(l))},{default:_(({file:l,progress:E,uploading:f,openFileSelector:z})=>[t("div",pe,[n(s(V),{onClick:z,loading:f},{default:_(()=>[p(i(f?`Uploading ${E}%`:"Upload an image"),1)]),_:2},1032,["onClick","loading"])])]),_:1}))])])]),t("div",fe,[t("label",ve,[p(i(e.__("Description"))+" ",1),o[13]||(o[13]=t("span",{class:"text-ink-red-3"},"*",-1))]),n(s(Y),{content:a.description,onChange:o[11]||(o[11]=l=>a.description=l),editable:!0,fixedMenu:!0,editorClass:"prose-sm max-w-none border-b border-x bg-surface-gray-2 rounded-b-md py-1 px-2 min-h-[7rem] mb-4"},null,8,["content"])])])])}}};export{Be as default};
//# sourceMappingURL=JobForm-BWW1ulqq.js.map
