import"@headlessui/vue";import{s as S,i as F,r as P,z as q,cz as D,o as E,A as R,b as T,u as U,d as A,e as o,f as s,g as f,j as d,h as u,k as c,l as r,n as l,p as g,t as m,P as H,_ as w,F as k,x,B as C,bu as K,X as O,q as X,M as G,a as V,H as I}from"./index-BIerRe8o.js";import{_ as J}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-Cdx-1Hlv.js";import"@tiptap/extension-code-block-lowlight";import"@tiptap/extension-placeholder";import"@tiptap/extension-table";import"@tiptap/extension-table-cell";import"@tiptap/extension-table-header";import"@tiptap/extension-table-row";import"@tiptap/extension-text-align";import"@tiptap/extension-text-style";import"@tiptap/extension-typography";import"@tiptap/vue-3";import"@tiptap/extension-mention";import"@vueuse/core";import{_ as Q}from"./CourseCard-Bg4d9c02.js";import{_ as W}from"./EmptyState.vue_vue_type_script_setup_true_lang-CbCenUow.js";import"@tiptap/core";import"@tiptap/extension-code-block";import"@tiptap/extension-heading";import"@tiptap/suggestion";import"@tiptap/extension-link";import"./UserAvatar-D66_PbG8.js";import"./CourseInstructors-B6EFgXV2.js";import"./ProgressBar-DT3bUdWT.js";const Y={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},Z={key:0,class:"pt-5 px-5"},ee={class:"mb-10"},se={class:"flex items-center justify-between"},te={class:"text-xl text-ink-gray-9 font-semibold"},re={class:"flex items-center space-x-2"},ae={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 mt-5"},oe={class:"relative group"},ie={key:0,class:"absolute inset-0 bg-black-overlay-500 opacity-60 rounded-md"},ne={key:1,class:"absolute inset-0 flex items-center justify-center"},le={key:1,class:"text-sm italic text-ink-gray-5 mt-4"},qe={__name:"Programs",setup(me){const{brand:$}=S(),n=F("$user"),b=P(!1),_=q(),h=P(""),z=D(),v=window.read_only_mode;E(()=>{!z.learningPaths.data&&!n.data?.is_moderator&&!n.data?.is_instructor&&_.push({name:"Courses"})});const y=R({url:"lms.lms.utils.get_programs",auto:!0,cache:"programs"}),M=e=>{V("frappe.client.insert",{doc:{doctype:"LMS Program",title:h.value}}).then(a=>{_.push({name:"ProgramForm",params:{programName:a.name}})})},j=(e,a)=>{V("lms.lms.utils.enroll_in_program_course",{program:e,course:a}).then(i=>{i.current_lesson?_.push({name:"Lesson",params:{courseName:a,chapterNumber:i.current_lesson.split("-")[0],lessonNumber:i.current_lesson.split("-")[1]}}):i&&_.push({name:"Lesson",params:{courseName:a,chapterNumber:1,lessonNumber:1}})}).catch(i=>{I.error(i.messages?.[0]||i)})},N=e=>!(n.data?.is_moderator||n.data?.is_instructor||e.membership||e.eligible),B=()=>v?!1:!!(n.data?.is_moderator||n.data?.is_instructor),L=T(()=>[{label:__("Programs")}]);return U(()=>({title:__("Programs"),icon:$.favicon})),(e,a)=>{const i=A("router-link");return s(),o(k,null,[f("header",Y,[u(r(J),{items:L.value},null,8,["items"]),B()?(s(),d(r(w),{key:0,onClick:a[0]||(a[0]=t=>b.value=!0),variant:"solid"},{prefix:l(()=>[u(r(H),{class:"h-4 w-4 stroke-1.5"})]),default:l(()=>[g(" "+m(e.__("New")),1)]),_:1})):c("",!0)]),r(y).data?.length?(s(),o("div",Z,[(s(!0),o(k,null,x(r(y).data,t=>(s(),o("div",ee,[f("div",se,[f("div",te,m(t.name),1),f("div",re,[t.members?(s(),d(r(C),{key:0,variant:"subtle",theme:"green",size:"lg"},{default:l(()=>[g(m(t.members)+" "+m(t.members==1?e.__("member"):e.__("members")),1)]),_:2},1024)):c("",!0),t.progress?(s(),d(r(C),{key:1,variant:"subtle",theme:"blue",size:"lg"},{default:l(()=>[g(m(t.progress)+m(e.__("% completed")),1)]),_:2},1024)):c("",!0),r(n).data?.is_moderator||r(n).data?.is_instructor?(s(),d(i,{key:2,to:{name:"ProgramForm",params:{programName:t.name}}},{default:l(()=>[r(v)?c("",!0):(s(),d(r(w),{key:0},{prefix:l(()=>[u(r(K),{class:"h-4 w-4 stroke-1.5"})]),default:l(()=>[g(" "+m(e.__("Edit")),1)]),_:1}))]),_:2},1032,["to"])):c("",!0)])]),t.courses?.length?(s(),o("div",ae,[(s(!0),o(k,null,x(t.courses,p=>(s(),o("div",oe,[u(Q,{course:p,onClick:ue=>j(t.name,p.name),class:"cursor-pointer"},null,8,["course","onClick"]),N(p)?(s(),o("div",ie)):c("",!0),N(p)?(s(),o("div",ne,[u(r(O),{class:"size-10 text-ink-white"})])):c("",!0)]))),256))])):(s(),o("div",le,m(e.__("No courses in this program")),1))]))),256))])):(s(),d(W,{key:1,type:"Programs"})),u(r(G),{modelValue:b.value,"onUpdate:modelValue":a[2]||(a[2]=t=>b.value=t),options:{title:e.__("New Program"),actions:[{label:e.__("Create"),variant:"solid",onClick:()=>M(e.close)}]}},{"body-content":l(()=>[u(r(X),{label:e.__("Title"),modelValue:h.value,"onUpdate:modelValue":a[1]||(a[1]=t=>h.value=t)},null,8,["label","modelValue"])]),_:1},8,["modelValue","options"])],64)}}};export{qe as default};
//# sourceMappingURL=Programs-CpJbjqpq.js.map
