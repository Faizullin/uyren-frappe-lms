import"@headlessui/vue";import{au as L,r as N,b as k,j as v,f as m,s as B,A as h,u as E,e as D,g as d,k as g,h as c,l as t,n as C,O as b}from"./index-BIerRe8o.js";import{_ as V}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-Cdx-1Hlv.js";import"@tiptap/extension-code-block-lowlight";import"@tiptap/extension-placeholder";import"@tiptap/extension-table";import"@tiptap/extension-table-cell";import"@tiptap/extension-table-header";import"@tiptap/extension-table-row";import"@tiptap/extension-text-align";import"@tiptap/extension-text-style";import"@tiptap/extension-typography";import"@tiptap/vue-3";import"@tiptap/extension-mention";import"@vueuse/core";import{g as P,f as z,b as M,_ as y,a as S}from"./NumberChart.vue_vue_type_script_setup_true_lang-CBOV4zcU.js";import"@tiptap/core";import"@tiptap/extension-code-block";import"@tiptap/extension-heading";import"@tiptap/suggestion";import"@tiptap/extension-link";function F(e){let u=e.data||[];u=u.sort((a,i)=>{const l=a[e.valueColumn],w=i[e.valueColumn];return l===w?0:l>w?-1:1});const p=u.map(a=>a[e.categoryColumn]),r=u.map(a=>a[e.valueColumn]),o=r.reduce((a,i)=>isNaN(i)?a:a+i,0);let _=["40%","70%"],f=["50%","48%"];e.subtitle&&(_=["40%","70%"],f=["50%","50%"]),e.showInlineLabels&&(f=["50%","50%"]);let x="horizontal",s=0,n="center",$=[0,10,10,10];return{animation:!0,animationDuration:700,color:e.colors,textStyle:{fontFamily:["InterVar","sans-serif"]},title:P(e.title,e.subtitle),dataset:{source:[[e.categoryColumn,e.valueColumn],...u.map(a=>[a[e.categoryColumn],a[e.valueColumn]])]},series:[{type:"pie",name:e.categoryColumn,center:f,radius:_,labelLine:{show:e.showInlineLabels,lineStyle:{width:2},length:10,length2:20,smooth:!0},label:{show:e.showInlineLabels,formatter:({value:a,name:i})=>{const l=o>0?a[1]/o*100:0;return`${i} (${l.toFixed(0)}%)`}},emphasis:{scaleSize:5}}],legend:e.showInlineLabels?null:{left:n,bottom:s,padding:$,orient:x,show:!0,type:"scroll",itemGap:12,formatter:function(a){const i=p.indexOf(a),l=o>0?r[i]/o*100:0;return`${a} (${l.toFixed(0)}%)`},textStyle:{padding:[0,0,0,-5],color:"#000"},icon:"circle",pageIcons:{horizontal:["M 17 3 h 2 c 0.386 0 0.738 0.223 0.904 0.572 s 0.115 0.762 -0.13 1.062 L 11.292 15 l 8.482 10.367 c 0.245 0.299 0.295 0.712 0.13 1.062 S 19.386 27 19 27 h -2 c -0.3 0 -0.584 -0.135 -0.774 -0.367 l -9 -11 c -0.301 -0.369 -0.301 -0.898 0 -1.267 l 9 -11 C 16.416 3.135 16.7 3 17 3 Z","M 12 27 h -2 c -0.386 0 -0.738 -0.223 -0.904 -0.572 s -0.115 -0.762 0.13 -1.062 L 17.708 15 L 9.226 4.633 c -0.245 -0.299 -0.295 -0.712 -0.13 -1.062 S 9.614 3 10 3 h 2 c 0.3 0 0.584 0.135 0.774 0.367 l 9 11 c 0.301 0.369 0.301 0.898 0 1.267 l -9 11 C 12.584 26.865 12.3 27 12 27 Z"]},pageIconColor:"#64748B",pageInactiveColor:"#C0CCDA",pageIconSize:10,pageTextStyle:{color:"#64748B"},animationDurationUpdate:300},tooltip:{trigger:"item",confine:!0,appendToBody:!1,formatter:function(a){const i=a,l=i.value[1],w=o>0?l/o*100:0,I=isNaN(l)?l:z(l,1,!0),A=w.toFixed(0);return`
          <div class="flex items-center justify-between gap-5">
            <div>${i.name}</div>
            <div class="font-bold">
              ${I} (${A}%)
            </div>
          </div>
        `}}}}const G=L({__name:"DonutChart",props:{config:{}},setup(e){const u=e,p=N(""),r=k(()=>{try{return F(u.config)}catch(o){return p.value=o.message,{}}});return(o,_)=>(m(),v(M,{options:r.value,error:p.value},null,8,["options","error"]))}}),O={class:""},j={class:"sticky top-0 z-10 flex items-center justify-between border-b bg-surface-white px-3 py-2.5 sm:px-5"},T={key:0,class:"p-5"},Z={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},R={class:"grid grid-cols-1 lg:grid-cols-2 gap-4 mt-4"},U={class:"border rounded-md min-h-72"},q={class:"border rounded-md min-h-72"},H={class:"border rounded-md"},J={class:"border rounded-md"},ht={__name:"Statistics",setup(e){const{brand:u}=B(),p=k(()=>[{label:"Statistics",route:{name:"Statistics"}}]),r=h({url:"lms.lms.api.get_chart_details",cache:["statistics"],auto:!0}),o=h({url:"lms.lms.utils.get_chart_data",params:{chart_name:"New Signups"},auto:!0,transform(s){return s.map(n=>({date:new Date(n.date),signups:n.count}))}}),_=h({url:"lms.lms.utils.get_chart_data",cache:["enrollments"],params:{chart_name:"Course Enrollments"},auto:!0,transform(s){return s.map(n=>({date:new Date(n.date),enrollments:n.count}))}}),f=h({url:"lms.lms.utils.get_chart_data",cache:["certifications"],params:{chart_name:"Certification"},auto:!0,transform(s){return s.map(n=>({date:new Date(n.date),certifications:n.count}))}}),x=h({url:"lms.lms.utils.get_course_completion_data",auto:!0,cache:["courseCompletion"]});return E(()=>({title:__("Statistics"),icon:u.favicon})),(s,n)=>(m(),D("div",O,[d("header",j,[c(t(V),{class:"h-7",items:p.value},null,8,["items"])]),t(r).data?(m(),D("div",T,[d("div",Z,[c(t(b),{text:s.__("Published Courses")},{default:C(()=>[c(t(y),{class:"border rounded-md",config:{title:"Courses",value:t(r).data.courses}},null,8,["config"])]),_:1},8,["text"]),c(t(b),{text:s.__("Active Members")},{default:C(()=>[c(t(y),{class:"border rounded-md",config:{title:"Signups",value:t(r).data.users}},null,8,["config"])]),_:1},8,["text"]),c(t(b),{text:s.__("Course Enrollments")},{default:C(()=>[c(t(y),{class:"border rounded-md",config:{title:"Enrollments",value:t(r).data.enrollments}},null,8,["config"])]),_:1},8,["text"]),c(t(b),{text:s.__("Course Completions")},{default:C(()=>[c(t(y),{class:"border rounded-md",config:{title:"Completions",value:t(r).data.completions}},null,8,["config"])]),_:1},8,["text"]),c(t(b),{text:s.__("Certified Members")},{default:C(()=>[c(t(y),{class:"border rounded-md",config:{title:"Certifications",value:t(r).data.certifications}},null,8,["config"])]),_:1},8,["text"])]),d("div",R,[d("div",U,[t(o).data?(m(),v(t(S),{key:0,config:{data:t(o).data,title:"Signups",subtitle:"Signups per month",xAxis:{key:"date",type:"time",title:"Date",timeGrain:"day"},yAxis:{title:"Signups"},series:[{name:"signups",type:"line",showDataPoints:!0}]}},null,8,["config"])):g("",!0)]),d("div",q,[t(_).data?(m(),v(t(S),{key:0,config:{data:t(_).data,title:"Enrollments",subtitle:"Enrollments per month",xAxis:{key:"date",type:"time",title:"Date",timeGrain:"day"},yAxis:{title:"Enrollments"},series:[{name:"enrollments",type:"line",showDataPoints:!0}]}},null,8,["config"])):g("",!0)]),d("div",H,[t(f).data?(m(),v(t(S),{key:0,config:{data:t(f).data,title:"Certifications",subtitle:"Certifications per month",xAxis:{key:"date",type:"time",title:"Date",timeGrain:"day"},yAxis:{title:"Certifications"},series:[{name:"certifications",type:"line",showDataPoints:!0}]}},null,8,["config"])):g("",!0)]),d("div",J,[t(x).data?(m(),v(t(G),{key:0,config:{data:t(x).data,title:"Completions",subtitle:"Course Completion",categoryColumn:"label",valueColumn:"value"}},null,8,["config"])):g("",!0)])])])):g("",!0)]))}};export{ht as default};
//# sourceMappingURL=Statistics-Dqx9At_r.js.map
