import{z as S,i as L,A as x,b as v,d as T,e as o,k as l,f as s,h as i,g as n,C as z,p as B,t as c,l as a,a9 as H,D as O,a6 as V,a7 as N,a8 as j,j as m,n as u,_ as f,H as E,s as F,u as P,F as C,x as D}from"./index-DcFDtKzU.js";import{_ as R}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-DSPCRa1r.js";import{_ as I}from"./CourseCard-CnltxOFl.js";import{_ as q}from"./DateRange-BXya_-do.js";import{_ as A}from"./CourseInstructors-B8w7xX0Z.js";import{_ as G}from"./UserAvatar-CrXqRFgS.js";import"./ProgressBar-ADd5BuXn.js";const Y={key:0,class:"border-2 rounded-md p-5 lg:w-72"},J={key:0},K={key:1},Q={key:1,class:"text-xs bg-red-100 text-red-700 float-right px-2 py-0.5 rounded-md"},U={key:2,class:"text-lg font-semibold mb-3 text-ink-gray-9"},W={key:3,class:"flex items-center mb-3 text-ink-gray-7"},X={class:"flex items-center mb-3 text-ink-gray-7"},Z={key:4,class:"flex items-center text-ink-gray-7"},tt={key:5},M={__name:"BatchOverlay",props:{batch:{type:Object,default:null}},setup(t){const g=S(),b=L("$user"),h=window.read_only_mode,e=t,y=x({url:"lms.lms.utils.enroll_in_batch",makeParams(r){return{batch:e.batch.data.name}}}),k=()=>{b.data||(window.location.href=`/login?redirect-to=/batches/details/${e.batch.data.name}`),y.submit({},{onSuccess(r){E.success(__("You have been enrolled in this batch")),g.push({name:"Batch",params:{batchName:e.batch.data.name}})}})},d=v(()=>e.batch.data?.seat_count?e.batch.data?.seat_count-e.batch.data?.students?.length:null),p=v(()=>e.batch.data?.students?.includes(b.data?.name)),_=v(()=>b.data?.is_moderator);return(r,$)=>{const w=T("router-link");return t.batch.data?(s(),o("div",Y,[t.batch.data.seat_count&&d.value>0?(s(),o("div",{key:0,class:z(["text-sm bg-green-100 text-green-700 px-2 py-1 rounded-md",t.batch.data.amount||t.batch.data.courses.length?"float-right":"w-fit mb-4"])},[B(c(d.value)+" ",1),d.value>1?(s(),o("span",J,c(r.__("Seats Left")),1)):d.value==1?(s(),o("span",K,c(r.__("Seat Left")),1)):l("",!0)],2)):t.batch.data.seat_count&&d.value<=0?(s(),o("div",Q,c(r.__("Sold Out")),1)):l("",!0),t.batch.data.amount?(s(),o("div",U,c(a(H)(t.batch.data.amount,t.batch.data.currency)),1)):l("",!0),t.batch.data.courses.length?(s(),o("div",W,[i(a(O),{class:"h-4 w-4 stroke-1.5 mr-2"}),n("span",null,c(t.batch.data.courses.length)+" "+c(r.__("Courses")),1)])):l("",!0),i(q,{startDate:t.batch.data.start_date,endDate:t.batch.data.end_date,class:"mb-3"},null,8,["startDate","endDate"]),n("div",X,[i(a(V),{class:"h-4 w-4 stroke-1.5 mr-2"}),n("span",null,c(a(N)(t.batch.data.start_time))+" - "+c(a(N)(t.batch.data.end_time)),1)]),t.batch.data.timezone?(s(),o("div",Z,[i(a(j),{class:"h-4 w-4 stroke-1.5 mr-2"}),n("span",null,c(t.batch.data.timezone),1)])):l("",!0),a(h)?l("",!0):(s(),o("div",tt,[_.value||p.value?(s(),m(w,{key:0,to:{name:"Batch",params:{batchName:t.batch.data.name}}},{default:u(()=>[i(a(f),{variant:"solid",class:"w-full mt-4"},{default:u(()=>[n("span",null,c(_.value?r.__("Manage Batch"):r.__("Visit Batch")),1)]),_:1})]),_:1},8,["to"])):t.batch.data.paid_batch&&t.batch.data.seats_left>0&&t.batch.data.accept_enrollments?(s(),m(w,{key:1,to:{name:"Billing",params:{type:"batch",name:t.batch.data.name}}},{default:u(()=>[p.value?l("",!0):(s(),m(a(f),{key:0,class:"w-full mt-4",variant:"solid"},{default:u(()=>[n("span",null,c(r.__("Register Now")),1)]),_:1}))]),_:1},8,["to"])):t.batch.data.allow_self_enrollment&&t.batch.data.seats_left&&t.batch.data.accept_enrollments?(s(),m(a(f),{key:2,variant:"solid",class:"w-full mt-2",onClick:$[0]||($[0]=vt=>k())},{default:u(()=>[B(c(r.__("Enroll Now")),1)]),_:1})):l("",!0),_.value?(s(),m(w,{key:3,to:{name:"BatchForm",params:{batchName:t.batch.data.name}}},{default:u(()=>[i(a(f),{class:"w-full mt-2"},{default:u(()=>[n("span",null,c(r.__("Edit")),1)]),_:1})]),_:1},8,["to"])):l("",!0)]))])):l("",!0)}}},at={key:0,class:""},et={class:"sticky top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"},st={class:"m-5 pb-10"},nt={class:"flex justify-between w-full"},rt={class:"md:w-2/3"},ct={class:"text-3xl font-semibold text-ink-gray-9"},ot={class:"my-3 leading-6 text-ink-gray-7"},lt={class:"flex avatar-group overlap"},dt=["innerHTML"],it={class:"hidden md:block"},ut={key:0},mt={class:"flex items-center mt-10"},ht={class:"text-2xl font-semibold"},bt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-5"},_t={key:0},ft=["innerHTML"],Bt={__name:"BatchDetail",props:{batchName:{type:String,required:!0}},setup(t){L("$user");const g=S(),{brand:b}=F(),h=t,e=x({url:"lms.lms.utils.get_batch_details",cache:["batch",h.batchName],params:{batch:h.batchName},auto:!0,onSuccess:d=>{d||g.push({name:"Batches"})}}),y=x({url:"lms.lms.utils.get_batch_courses",params:{batch:h.batchName},cache:["batchCourses",h.batchName],auto:!0}),k=v(()=>{let d=[{label:"Batches",route:{name:"Batches"}}];return d.push({label:e?.data?.title,route:{name:"BatchDetail",params:{batchName:e?.data?.name}}}),d});return P(()=>({title:e?.data?.title,icon:b.favicon})),(d,p)=>{const _=T("router-link");return a(e).data?(s(),o("div",at,[n("header",et,[i(a(R),{items:k.value},null,8,["items"])]),n("div",st,[n("div",nt,[n("div",rt,[n("div",ct,c(a(e).data.title),1),n("div",ot,c(a(e).data.description),1),n("div",lt,[n("div",{class:z(["h-6 mr-1",{"avatar-group overlap":a(e).data.instructors.length>1}])},[(s(!0),o(C,null,D(a(e).data.instructors,r=>(s(),m(G,{user:r},null,8,["user"]))),256))],2),i(A,{instructors:a(e).data.instructors},null,8,["instructors"])]),n("div",{class:"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal mt-10",innerHTML:a(e).data.batch_details},null,8,dt)]),n("div",it,[i(M,{batch:a(e)},null,8,["batch"])])]),i(M,{batch:a(e),class:"md:hidden mt-5"},null,8,["batch"]),a(e).data.courses.length?(s(),o("div",ut,[n("div",mt,[n("div",ht,c(d.__("Courses")),1)]),n("div",bt,[a(e).data.courses?(s(!0),o(C,{key:0},D(a(y).data,r=>(s(),o("div",{key:r.course},[i(_,{to:{name:"CourseDetail",params:{courseName:r.name}}},{default:u(()=>[(s(),m(I,{course:r,key:r.name},null,8,["course"]))]),_:2},1032,["to"])]))),128)):l("",!0)]),a(e).data.batch_details_raw?(s(),o("div",_t,[n("div",{innerHTML:a(e).data.batch_details_raw,class:"batch-description"},null,8,ft)])):l("",!0)])):l("",!0)])])):l("",!0)}}};export{Bt as default};
//# sourceMappingURL=BatchDetail-DWTcXk-W.js.map
