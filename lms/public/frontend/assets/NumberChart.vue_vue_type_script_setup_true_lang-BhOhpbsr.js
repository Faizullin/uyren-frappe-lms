import{bk as I,au as A,r as Y,o as _,bl as k,ae as C,V as N,w as B,e as v,f as y,F as z,bm as O,bn as g,g as m,t as c,b as E,j as X,C as L,k as G,l as M}from"./index-DcFDtKzU.js";function S(e){return e.split("_").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function d(e,t=0,s=!1){if(isNaN(e))return e.toString();let a="en-US";return s?new Intl.NumberFormat(a,{notation:"compact",maximumFractionDigits:t}).format(e):(t=t||$(e),new Intl.NumberFormat(a,{minimumFractionDigits:t,maximumFractionDigits:t}).format(e))}function $(e){if(!e||isNaN(e))return 0;const t=e.toString(),s=t.indexOf(".");return s===-1?0:Math.min(t.length-s-1,2)}function j(e,t,s="day"){return e?(s&&(t={second:"MMMM D, YYYY h:mm:ss A",minute:"MMMM D, YYYY h:mm A",hour:"MMMM D, YYYY h:00 A",day:"MMMM D, YYYY",week:"MMM Do, YYYY",month:"MMMM, YYYY",year:"YYYY",quarter:"[Q]Q, YYYY"}[s]),t||(t="MMM D, YY"),I(e).format(t)):""}function w(e){return e&&typeof e=="object"&&!Array.isArray(e)}function f(e,...t){if(!t.length)return e;const s=t.shift();if(!s||!w(e)||!w(s))return f(e,...t);let a=Object.assign({},e);return Object.keys(s).forEach(r=>{w(s[r])&&r in a?a[r]=f(a[r],s[r]):a[r]=s[r]}),f(a,...t)}const W=0,F=10,P=30,H=10,V=20,U=18,Z=24;function Q(e){const t=e.title,s=e.subtitle,a=t?1:0,r=s?1:0;e.xAxis.title,e.yAxis.title,e.y2Axis?.title;const u=e.series.length>1?1:0,i=q(e),b=J(e);return{animation:!0,animationDuration:700,textStyle:{fontFamily:["InterVar","sans-serif"]},title:R(t,s),color:e.colors,grid:{left:"1%",right:e.swapXY?"2.5%":"1.5%",top:W+V*a+U*r+Z,bottom:F+P*u,containLabel:!0},xAxis:i,yAxis:b,series:[],tooltip:{show:!0,trigger:"axis",formatter:o=>{if(Array.isArray(o)&&(o=o.filter(p=>p.value?.[1]!==0).sort((p,n)=>n.value?.[1]-p.value?.[1])),!Array.isArray(o)){const p=o,n=e.swapXY?p.value[0]:p.value[1],l=isNaN(n)?n:d(n);return`
                <div class="flex items-center justify-between gap-5">
                  <div>${p.name}</div>
                  <div class="font-bold">${l}</div>
                </div>
              `}if(Array.isArray(o))return o.map((n,l)=>{const x=e.swapXY?n.value[1]:n.value[0],h=e.swapXY?n.value[0]:n.value[1],T=e.xAxis.type=="time"?j(x,void 0,e.xAxis.timeGrain):x,D=isNaN(h)?h:d(h);return`
              <div class="flex flex-col">
                ${l==0?`<div>${T}</div>`:""}
                <div class="flex items-center justify-between gap-5">
                  <div class="flex gap-1 items-center">
                    ${n.marker}
                    <div>${S(n.seriesName)}:</div>
                  </div>
                  <div class="font-bold">${D}</div>
                </div>
              </div>
            `}).join("")},confine:!0,appendToBody:!1,axisPointer:{type:"shadow"}},legend:{show:u,type:"scroll",bottom:H,orient:"horizontal",itemGap:12,padding:[0,25],formatter:function(o){return S(o)},textStyle:{padding:[0,0,0,-5],color:"#000"},icon:"circle",pageIcons:{horizontal:["M 17 3 h 2 c 0.386 0 0.738 0.223 0.904 0.572 s 0.115 0.762 -0.13 1.062 L 11.292 15 l 8.482 10.367 c 0.245 0.299 0.295 0.712 0.13 1.062 S 19.386 27 19 27 h -2 c -0.3 0 -0.584 -0.135 -0.774 -0.367 l -9 -11 c -0.301 -0.369 -0.301 -0.898 0 -1.267 l 9 -11 C 16.416 3.135 16.7 3 17 3 Z","M 12 27 h -2 c -0.386 0 -0.738 -0.223 -0.904 -0.572 s -0.115 -0.762 0.13 -1.062 L 17.708 15 L 9.226 4.633 c -0.245 -0.299 -0.295 -0.712 -0.13 -1.062 S 9.614 3 10 3 h 2 c 0.3 0 0.584 0.135 0.774 0.367 l 9 11 c 0.301 0.369 0.301 0.898 0 1.267 l -9 11 C 12.584 26.865 12.3 27 12 27 Z"]},pageIconColor:"#64748B",pageInactiveColor:"#C0CCDA",pageIconSize:10,pageTextStyle:{color:"#64748B"},animationDurationUpdate:300}}}function R(e,t){return{top:"4px",left:"0.8%",text:e,subtext:t,padding:0,itemGap:-3,textStyle:{fontSize:14,fontWeight:500,lineHeight:24},subtextStyle:{fontSize:13,fontWeight:400,lineHeight:20}}}function q(e){const t=e.swapXY?{show:!0,type:"value",z:2,scale:!1,boundaryGap:!1,position:"top",name:`${e.yAxis.title} →`,nameGap:6,nameLocation:"end",nameTextStyle:{align:"right",verticalAlign:"bottom",padding:[0,0,26,0],backgroundColor:"#fff",borderColor:"#fff",borderWidth:4},splitLine:{show:!0,width:1},axisLine:{show:!1,onZero:!1},axisTick:{show:!1,alignWithLabel:!0,formatter:function(s){return d(s,1,!0)}},axisLabel:{show:!0,hideOverlap:!0,margin:8,formatter:function(s){return d(s,1,!0)}}}:{z:2,type:e.xAxis.type,scale:!0,splitLine:{show:!1},axisLine:{show:!0},axisTick:{show:!1,alignWithLabel:!0},axisLabel:{show:!0,hideOverlap:!0,showMaxLabel:e.xAxis.type==="category"||e.xAxis.type==="value",margin:8}};return f(t,e.swapXY?e.yAxis.echartOptions:e.xAxis.echartOptions)}function J(e){let t=e.swapXY?{show:!0,type:e.xAxis.type,z:2,scale:!0,inverse:"true",splitLine:{show:!1},axisLine:{show:!0},axisTick:{show:!1,alignWithLabel:!0},axisLabel:{show:!0,hideOverlap:!0,margin:6}}:{show:!0,type:"value",z:2,scale:!1,boundaryGap:["0%","1%"],name:`↑ ${e.yAxis.title}`,nameGap:6,nameLocation:"end",nameTextStyle:{align:"left",verticalAlign:"top",padding:[0,0,0,-2],backgroundColor:"#fff",borderColor:"#fff",borderWidth:4},splitLine:{show:!0,width:1},axisLine:{show:!1,onZero:!1},axisTick:{show:!1,alignWithLabel:!0},axisLabel:{show:!0,hideOverlap:!0,margin:8,formatter:function(a){return d(a,1,!0)}},min:e.yAxis.yMin,max:e.yAxis.yMax};t=f(t,e.swapXY?e.xAxis.echartOptions:e.yAxis.echartOptions);let s={show:!1,type:"value",z:2,alignTicks:!0,scale:!1,boundaryGap:["0%","1%"],name:`${e.y2Axis?.title} ↑`,nameLocation:"end",nameTextStyle:{align:"right",verticalAlign:"top",padding:[0,5,0,0],backgroundColor:"#fff"},nameGap:6,splitLine:{show:!0,width:1},axisLine:{show:!1,onZero:!1},axisTick:{show:!1,alignWithLabel:!0},axisLabel:{show:!0,hideOverlap:!0,margin:8,formatter:function(a){return d(a,1,!0)}},min:e.y2Axis?.yMin,max:e.y2Axis?.yMax};return s=f(s,(e.swapXY,e.y2Axis?.echartOptions)),e.swapXY?[t]:[t,s]}function K(e){const t=e.data||[],s=Q(e);if(e.xAxis.type==="time"&&e.swapXY)throw new Error("Swap axes is not supported for time series data");if(e.series.find(i=>i.axis==="y2"||i.type!=="bar")&&e.swapXY)throw new Error("Swap axes is not supported for non-bar series or y2 axis");const a=e.swapXY,r=e.series.slice().reverse().findIndex(i=>i.type==="bar");return e.series.some(i=>i.axis==="y2")&&(s.yAxis[1].show=!0),s.series=e.series.map((i,b)=>{let o="top";i.type=="bar"&&e.stacked&&(o=b==r?"top":"inside"),i.type=="bar"&&a&&(o="right");const p={type:i.type,name:i.name,data:t.map(l=>{let x,h;return a?(x=l[i.name],h=l[e.xAxis.key]):(x=l[e.xAxis.key],h=l[i.name]),[x,h]}),yAxisIndex:i.axis==="y2"?1:0,label:{show:i.showDataLabels,position:o,formatter:l=>{const x=a?l.value?.[0]:l.value?.[1];return d(x,1,!0)},fontSize:11},labelLayout:{hideOverlap:!0},itemStyle:{color:i.color}};let n={};return i.type==="bar"&&(n=ee(e,i)),i.type==="line"&&(n=te(e,i)),i.type==="area"&&(n=se(e,i)),f(p,n,i.echartOptions)}),f(s,e.echartOptions)}function ee(e,t){const s=e.swapXY?[0,2,2,0]:[2,2,0,0],a=e.series.findIndex(i=>i.name===t.name),u=e.series.slice().reverse().findIndex(i=>i.type==="bar")===a;return{stack:e.stacked?"stack":void 0,barMaxWidth:60,itemStyle:{borderRadius:e.stacked?u?s:0:s}}}function te(e,t){return{connectNulls:!0,symbol:"circle",symbolSize:7,showSymbol:t.showDataPoints||t.showDataLabels,emphasis:{},lineStyle:{width:t.lineWidth||2,type:t.lineType}}}function se(e,t){return{type:"line",showSymbol:t.showDataPoints,areaStyle:{color:t.color,opacity:t.fillOpacity||.5}}}const ae=A({__name:"ECharts",props:{options:{},events:{},error:{}},setup(e){const t=e;let s;const a=Y();return _(()=>{if(!a.value)return;s=k(a.value,"light",{renderer:"svg"}),s.setOption({...t.options},!0),t.events?.click&&s.on("click",t.events.click);const r=C(()=>{s.resize({animation:{duration:300}})},250);let u=new ResizeObserver(r);setTimeout(()=>u.observe(a.value),500),N(()=>u.unobserve(a.value))}),B(()=>t.options,r=>{s&&s.setOption(r,!0)},{deep:!0}),(r,u)=>(y(),v(z,null,[O(m("div",{ref_key:"chartDiv",ref:a,class:"h-full w-full min-w-[300px] md:min-w-[400px] min-h-[300px] px-4 py-2"},null,512),[[g,!r.error]]),O(m("div",{class:"flex h-full w-full items-center justify-center text-center text-red-500"}," Error: "+c(r.error),513),[[g,r.error]])],64))}}),ue=A({__name:"AxisChart",props:{config:{}},setup(e){const t=e,s=Y(""),a=E(()=>{try{return K(t.config)}catch(r){return s.value=r.message,{}}});return(r,u)=>(y(),X(ae,{options:a.value,error:s.value},null,8,["options","error"]))}}),ie={class:"flex w-full flex-col"},re={class:"truncate text-sm font-medium"},ne={class:"flex-1 flex-shrink-0 truncate text-[24px] font-semibold leading-10"},oe={class:""},pe=A({__name:"NumberChart",props:{config:{}},setup(e){return Y(""),(t,s)=>(y(),v("div",{class:L(["flex max-h-[140px] items-center gap-2 overflow-hidden bg-white px-6 pt-5",t.config.delta?"pb-6":"pb-3"])},[m("div",ie,[m("span",re,c(t.config.title),1),m("div",ne,c(t.config.prefix)+c(M(d)(t.config.value,1,!0))+c(t.config.suffix),1),t.config.delta?(y(),v("div",{key:0,class:L(["flex items-center gap-0.5 text-xs font-medium",[t.config.negativeIsBetter?t.config.delta>=0?"text-red-500":"text-green-500":t.config.delta>=0?"text-green-500":"text-red-500"]])},[m("span",oe,c(t.config.delta>=0?"↑":"↓"),1),m("span",null,c(t.config.deltaPrefix)+c(M(d)(t.config.delta,1,!0))+c(t.config.deltaSuffix),1)],2)):G("",!0)])],2))}});export{pe as _,ue as a,ae as b,d as f,R as g};
//# sourceMappingURL=NumberChart.vue_vue_type_script_setup_true_lang-BhOhpbsr.js.map
