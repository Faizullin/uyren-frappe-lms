import{z as S,i as L,A as x,b as p,d as T,e as c,k as l,f as s,h as d,g as r,C as z,p as B,t as n,l as a,a9 as H,D as O,a6 as V,a7 as N,a8 as j,j as m,n as u,_ as f,H as E,s as F,u as P,F as C,x as D}from"./index-BIerRe8o.js";import"@headlessui/vue";import{_ as R}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-Cdx-1Hlv.js";import"@tiptap/extension-code-block-lowlight";import"@tiptap/extension-placeholder";import"@tiptap/extension-table";import"@tiptap/extension-table-cell";import"@tiptap/extension-table-header";import"@tiptap/extension-table-row";import"@tiptap/extension-text-align";import"@tiptap/extension-text-style";import"@tiptap/extension-typography";import"@tiptap/vue-3";import"@tiptap/extension-mention";import"@vueuse/core";import{_ as I}from"./CourseCard-Bg4d9c02.js";import{_ as q}from"./DateRange-DkjHGnF_.js";import{_ as A}from"./CourseInstructors-B6EFgXV2.js";import{_ as G}from"./UserAvatar-D66_PbG8.js";import"@tiptap/core";import"@tiptap/extension-code-block";import"@tiptap/extension-heading";import"@tiptap/suggestion";import"@tiptap/extension-link";import"./ProgressBar-DT3bUdWT.js";const Y={key:0,class:"border-2 rounded-md p-5 lg:w-72"},J={key:0},K={key:1},Q={key:1,class:"text-xs bg-red-100 text-red-700 float-right px-2 py-0.5 rounded-md"},U={key:2,class:"text-lg font-semibold mb-3 text-ink-gray-9"},W={key:3,class:"flex items-center mb-3 text-ink-gray-7"},X={class:"flex items-center mb-3 text-ink-gray-7"},Z={key:4,class:"flex items-center text-ink-gray-7"},tt={key:5},M={__name:"BatchOverlay",props:{batch:{type:Object,default:null}},setup(t){const v=S(),b=L("$user"),h=window.read_only_mode,e=t,g=x({url:"lms.lms.utils.enroll_in_batch",makeParams(o){return{batch:e.batch.data.name}}}),y=()=>{b.data||(window.location.href=`/login?redirect-to=/batches/details/${e.batch.data.name}`),g.submit({},{onSuccess(o){E.success(__("You have been enrolled in this batch")),v.push({name:"Batch",params:{batchName:e.batch.data.name}})}})},i=p(()=>e.batch.data?.seat_count?e.batch.data?.seat_count-e.batch.data?.students?.length:null),k=p(()=>e.batch.data?.students?.includes(b.data?.name)),_=p(()=>b.data?.is_moderator);return(o,$)=>{const w=T("router-link");return t.batch.data?(s(),c("div",Y,[t.batch.data.seat_count&&i.value>0?(s(),c("div",{key:0,class:z(["text-sm bg-green-100 text-green-700 px-2 py-1 rounded-md",t.batch.data.amount||t.batch.data.courses.length?"float-right":"w-fit mb-4"])},[B(n(i.value)+" ",1),i.value>1?(s(),c("span",J,n(o.__("Seats Left")),1)):i.value==1?(s(),c("span",K,n(o.__("Seat Left")),1)):l("",!0)],2)):t.batch.data.seat_count&&i.value<=0?(s(),c("div",Q,n(o.__("Sold Out")),1)):l("",!0),t.batch.data.amount?(s(),c("div",U,n(a(H)(t.batch.data.amount,t.batch.data.currency)),1)):l("",!0),t.batch.data.courses.length?(s(),c("div",W,[d(a(O),{class:"h-4 w-4 stroke-1.5 mr-2"}),r("span",null,n(t.batch.data.courses.length)+" "+n(o.__("Courses")),1)])):l("",!0),d(q,{startDate:t.batch.data.start_date,endDate:t.batch.data.end_date,class:"mb-3"},null,8,["startDate","endDate"]),r("div",X,[d(a(V),{class:"h-4 w-4 stroke-1.5 mr-2"}),r("span",null,n(a(N)(t.batch.data.start_time))+" - "+n(a(N)(t.batch.data.end_time)),1)]),t.batch.data.timezone?(s(),c("div",Z,[d(a(j),{class:"h-4 w-4 stroke-1.5 mr-2"}),r("span",null,n(t.batch.data.timezone),1)])):l("",!0),a(h)?l("",!0):(s(),c("div",tt,[_.value||k.value?(s(),m(w,{key:0,to:{name:"Batch",params:{batchName:t.batch.data.name}}},{default:u(()=>[d(a(f),{variant:"solid",class:"w-full mt-4"},{default:u(()=>[r("span",null,n(_.value?o.__("Manage Batch"):o.__("Visit Batch")),1)]),_:1})]),_:1},8,["to"])):t.batch.data.paid_batch&&t.batch.data.seats_left>0&&t.batch.data.accept_enrollments?(s(),m(w,{key:1,to:{name:"Billing",params:{type:"batch",name:t.batch.data.name}}},{default:u(()=>[k.value?l("",!0):(s(),m(a(f),{key:0,class:"w-full mt-4",variant:"solid"},{default:u(()=>[r("span",null,n(o.__("Register Now")),1)]),_:1}))]),_:1},8,["to"])):t.batch.data.allow_self_enrollment&&t.batch.data.seats_left&&t.batch.data.accept_enrollments?(s(),m(a(f),{key:2,variant:"solid",class:"w-full mt-2",onClick:$[0]||($[0]=pt=>y())},{default:u(()=>[B(n(o.__("Enroll Now")),1)]),_:1})):l("",!0),_.value?(s(),m(w,{key:3,to:{name:"BatchForm",params:{batchName:t.batch.data.name}}},{default:u(()=>[d(a(f),{class:"w-full mt-2"},{default:u(()=>[r("span",null,n(o.__("Edit")),1)]),_:1})]),_:1},8,["to"])):l("",!0)]))])):l("",!0)}}},at={key:0,class:""},et={class:"sticky top-0 z-10 border-b bg-surface-white px-3 py-2.5 sm:px-5"},st={class:"m-5 pb-10"},rt={class:"flex justify-between w-full"},ot={class:"md:w-2/3"},nt={class:"text-3xl font-semibold text-ink-gray-9"},ct={class:"my-3 leading-6 text-ink-gray-7"},lt={class:"flex avatar-group overlap"},it=["innerHTML"],dt={class:"hidden md:block"},ut={key:0},mt={class:"flex items-center mt-10"},ht={class:"text-2xl font-semibold"},bt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-5"},_t={key:0},ft=["innerHTML"],qt={__name:"BatchDetail",props:{batchName:{type:String,required:!0}},setup(t){L("$user");const v=S(),{brand:b}=F(),h=t,e=x({url:"lms.lms.utils.get_batch_details",cache:["batch",h.batchName],params:{batch:h.batchName},auto:!0,onSuccess:i=>{i||v.push({name:"Batches"})}}),g=x({url:"lms.lms.utils.get_batch_courses",params:{batch:h.batchName},cache:["batchCourses",h.batchName],auto:!0}),y=p(()=>{let i=[{label:"Batches",route:{name:"Batches"}}];return i.push({label:e?.data?.title,route:{name:"BatchDetail",params:{batchName:e?.data?.name}}}),i});return P(()=>({title:e?.data?.title,icon:b.favicon})),(i,k)=>{const _=T("router-link");return a(e).data?(s(),c("div",at,[r("header",et,[d(a(R),{items:y.value},null,8,["items"])]),r("div",st,[r("div",rt,[r("div",ot,[r("div",nt,n(a(e).data.title),1),r("div",ct,n(a(e).data.description),1),r("div",lt,[r("div",{class:z(["h-6 mr-1",{"avatar-group overlap":a(e).data.instructors.length>1}])},[(s(!0),c(C,null,D(a(e).data.instructors,o=>(s(),m(G,{user:o},null,8,["user"]))),256))],2),d(A,{instructors:a(e).data.instructors},null,8,["instructors"])]),r("div",{class:"ProseMirror prose prose-table:table-fixed prose-td:p-2 prose-th:p-2 prose-td:border prose-th:border prose-td:border-outline-gray-2 prose-th:border-outline-gray-2 prose-td:relative prose-th:relative prose-th:bg-surface-gray-2 prose-sm max-w-none !whitespace-normal mt-10",innerHTML:a(e).data.batch_details},null,8,it)]),r("div",dt,[d(M,{batch:a(e)},null,8,["batch"])])]),d(M,{batch:a(e),class:"md:hidden mt-5"},null,8,["batch"]),a(e).data.courses.length?(s(),c("div",ut,[r("div",mt,[r("div",ht,n(i.__("Courses")),1)]),r("div",bt,[a(e).data.courses?(s(!0),c(C,{key:0},D(a(g).data,o=>(s(),c("div",{key:o.course},[d(_,{to:{name:"CourseDetail",params:{courseName:o.name}}},{default:u(()=>[(s(),m(I,{course:o,key:o.name},null,8,["course"]))]),_:2},1032,["to"])]))),128)):l("",!0)]),a(e).data.batch_details_raw?(s(),c("div",_t,[r("div",{innerHTML:a(e).data.batch_details_raw,class:"batch-description"},null,8,ft)])):l("",!0)])):l("",!0)])])):l("",!0)}}};export{qt as default};
//# sourceMappingURL=BatchDetail-CbSDcRqc.js.map
